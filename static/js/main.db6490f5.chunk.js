(this["webpackJsonpsvg-experiments"]=this["webpackJsonpsvg-experiments"]||[]).push([[0],{189:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Editor}));var _home_runner_work_svg_experiments_svg_experiments_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(51),_indicesToReferences__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(88),_stringsToNodes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(89),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),_parseGraph__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(190),_Diagram__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(90),_Editor_css__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(401),_Editor_css__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_Editor_css__WEBPACK_IMPORTED_MODULE_6__),graphAsString='var stack = stringsToNodes([\n    [\n        {name: "group 1", elements: [\n            "element 11", \n            {name: "element 2", size: 1.5, symbol: "component"}, \n            {name: "an element with long text", symbol: "component"}            \n        ]},\n        {name: "group 2", elements: ["element 4"]}\n    ],\n    [\n        {name: "group 3", elements: ["element 1", "element 2"]},\n        {name: "group 4", elements: [\n            {name: "group 6", elements: ["element 4"]}, \n            {name: "placeholder", size: 0.3, isPlaceholder: true}, \n            "element 3"\n        ]},\n        "node on top level", \n        {name: "an element with long text", symbol: "component"}     \n    ],\n    [\n        {name: "group 5", elements: [\n            "element 1", "element 2", "element 3", \n            {name: "element with changed name", size: 1.5}, \n            {name: "element 5", size: 0.7}]}\n    ]\n]);\n\nvar edgeIndices = [\n    {from: [0, 0, 0],    to: [1, 3]},\n    {from: [0, 0, 1],    to: [1, 0, 0]},\n    {from: [0, 0, 2],    to: [1, 1, 0, 0]},\n    {from: [0, 1, 0],    to: [1, 0, 1]},\n    {from: [1, 1, 0, 0], to: [2, 0, 2]},\n    {from: [1, 0, 1],    to: [2, 0, 4]},\n    {from: [1, 0, 1],    to: [2, 0, 3]},\n    {from: [1, 0, 1],    to: [2, 0, 2]},\n    {from: [1, 0, 1],    to: [2, 0, 1]},\n    {from: [1, 0, 1],    to: [2, 0, 0]},\n    {from: [2, 0, 0],    to: [1, 0, 0]},\n    {from: [2, 0, 1],    to: [1, 0, 0]},\n    {from: [2, 0, 0],    to: [2, 0, 3]},\n    {from: [2, 0, 1],    to: [2, 0, 3]},\n    {from: [2, 0, 4],    to: [2, 0, 3]},\n    {from: [0, 0, 0],    to: [0, 0, 2]},\n    {from: [0, 0, 0],    to: [0, 0, 1]},\n    {from: [0, 0, 0],    to: [1, 0, 0]},\n    {from: [0, 0, 0],    to: [1, 0, 0]},\n    {from: [0, 1, 0],    to: [1, 1, 1]},\n    {from: [1, 1, 1],    to: [2, 0, 2]},\n    {from: [0, 1, 0],    to: [1, 1, 2]},\n    {from: [1, 0, 1],    to: [1, 0, 0]},\n    {from: [0, 0, 0],    to: [2, 0, 0]},\n    {from: [0, 0, 0],    to: [2, 0, 1]},\n    {from: [1, 0, 1],    to: [1, 1, 0, 0]}\n];\nvar edges = indicesToReferences(stack, edgeIndices);\n\nvar graph = {\n    stack: stack,\n    edges: edges\n};\n\ngraph\n',indicesToReferences=_indicesToReferences__WEBPACK_IMPORTED_MODULE_1__.a,stringsToNodes=_stringsToNodes__WEBPACK_IMPORTED_MODULE_2__.a,initialGraph=eval(graphAsString),Editor=function(){var e=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)(initialGraph),t=Object(_home_runner_work_svg_experiments_svg_experiments_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(e,2),n=t[0],r=t[1],o=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)(""),a=Object(_home_runner_work_svg_experiments_svg_experiments_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(o,2),s=a[0],c=a[1];return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div",{id:"parent",className:"App"},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div",{id:"graph"},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Diagram__WEBPACK_IMPORTED_MODULE_5__.a,{stack:n.stack,edges:n.edges})),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("textarea",{cols:100,rows:45,onChange:function(e){var t=Object(_parseGraph__WEBPACK_IMPORTED_MODULE_4__.a)(e.target.value);"string"===typeof t?c(t):(r(t),c(""))},defaultValue:graphAsString}),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p",{className:"error-message"},s)))}},190:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return parseGraph}));var _indicesToReferences__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(88),_stringsToNodes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(89),indicesToReferences=_indicesToReferences__WEBPACK_IMPORTED_MODULE_0__.a,stringsToNodes=_stringsToNodes__WEBPACK_IMPORTED_MODULE_1__.a;function parseGraph(text){try{var graph=eval(text);return void 0===graph?"Script is not returning a graph object!":void 0===graph.stack?"Property layers is missing in graph object!":void 0===graph.edges?"Property edges is missing in graph object!":graph.edges.every((function(e){return void 0!==e.from}))?graph.edges.every((function(e){return void 0!==e.to}))?graph:"Property to must be defined on every edge!":"Property from must be defined on every edge!"}catch(e){return e.message}}},193:function(e,t,n){e.exports=n(406)},400:function(e,t,n){},401:function(e,t,n){},406:function(e,t,n){"use strict";n.r(t);n(194),n(203);var r=n(0),o=n.n(r),a=n(188),s=n.n(a),c=(n(400),n(57)),i=n(46),l=n(189),f=n(90);function m(e){return{kind:"node",name:e,symbol:"component",size:1.2}}var u=function(){var e=m("Product API"),t=m("Stock API"),n=m("Product Service DB"),r=m("Product Importer"),a=m("Stock Importer"),s=m("Category Importer"),c=m("Campaign Importer"),i={kind:"stack",elements:[{kind:"layer",elements:[e,t]},{kind:"layer",elements:[n]},{kind:"layer",elements:[r,a,s,c]}]},l=[{from:e,to:n},{from:t,to:n},{from:n,to:r},{from:n,to:a},{from:n,to:s},{from:n,to:c}];return o.a.createElement(f.a,{stack:i,edges:l})};function d(e){throw new Error("Unexpected object: "+e)}function E(e){return{element:e,edges:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],syntheticNodes:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],syntheticEdges:arguments.length>3&&void 0!==arguments[3]?arguments[3]:[]}}function h(e,t){return t(e.element),e}function g(e,t){return t(e),e}function p(e){var t={kind:"node",visible:!0,shape:"rectangle"};return e?"string"===typeof e?Object.assign(t,{name:e}):Object.assign(t,e):t}function _(){return p({visible:!1})}function x(e){return p({name:e,symbol:"component"})}function y(e){return p({name:e,shape:"db-cylinder"})}function b(e){return p({name:e,shape:"queue-cylinder"})}function v(e,t){return{from:e,to:t}}function k(e){switch(e.kind){case"node":return[e];case"row":case"column":return e.elements.flatMap(k);default:d(e)}}function w(e){switch(e.kind){case"node":return[];case"row":case"column":return e.elements.flatMap(w).concat(e);default:d(e)}}function M(e){switch(e.kind){case"node":return[e];case"row":case"column":return e.elements.flatMap(M).concat(e);default:d(e)}}var I=n(51),O=n(4),P=5,Y=5,j=150,X=60,L=15,T=40,S=15,A=10,D=20,C=10,B=.3*L,W=.4*L,K=.5*L,R=.4*L;function N(e){return Y+e.offsetElementsX*(j+A)+(e.borderIndexMaxX*(2*e.offsetElementsX+1)-e.borderIndexLeft)*L+e.crossLayerPathSegmentOffsetMaxX*e.offsetElementsX*C}function U(e){return P+e.offsetElementsY*(X+D)+(e.borderIndexMaxPreviousTop+e.borderIndexMaxTop-e.borderIndexTop)*T+e.borderIndexMaxPreviousBottom*S+e.midPathSegmentOffsetMaxPreviousY*C}var q=function(e){var t=.4*e.width,n=.15*e.width;return o.a.createElement("g",{key:e.symbolKey},o.a.createElement("rect",{x:e.x+t/2,y:e.y,width:.8*e.width,height:1.1*e.width,fill:"none",strokeWidth:.5,stroke:"black"}),o.a.createElement("rect",{x:e.x,y:e.y+n,width:t,height:n,fill:"lightgrey",strokeWidth:.5,stroke:"black"}),o.a.createElement("rect",{x:e.x,y:e.y+3*n,width:t,height:n,fill:"lightgrey",strokeWidth:.5,stroke:"black"}))},F=function(e){var t=e.node;if(!t.visible)return null;var n=N(t),r=U(t),a=t.selected?1.5:.5;return o.a.createElement("g",{key:t.elementKey},"rectangle"===t.shape&&o.a.createElement("rect",{x:n,y:r,width:j,height:X,onClick:function(n){return e.onNodeClick(t)},fill:"white",strokeWidth:a,stroke:"black"}),"db-cylinder"===t.shape&&o.a.createElement("g",null,o.a.createElement("path",{d:"M "+n+" "+(r+K)+" A "+j/2+","+K+" 0 1,1 "+(n+j)+","+(r+K)+" V "+(r+X-K)+" A "+j/2+","+K+" 0 1,1 "+n+","+(r+X-K)+" Z",onClick:function(n){return e.onNodeClick(t)},stroke:"black",strokeWidth:a,fill:"white"}),o.a.createElement("path",{d:"M "+n+" "+(r+K)+" A "+j/2+","+K+" 0 1,0 "+(n+j)+","+(r+K),stroke:"black",strokeWidth:a,fill:"none"})),"queue-cylinder"===t.shape&&o.a.createElement("g",null,o.a.createElement("path",{d:"M "+(n+R)+" "+r+" A "+R+","+X/2+" 0 1,0 "+(n+R)+","+(r+X)+" H "+(n+j-R)+" A "+R+","+X/2+" 0 1,0 "+(n+j-R)+","+r+" Z",onClick:function(n){return e.onNodeClick(t)},stroke:"black",strokeWidth:a,fill:"white"}),o.a.createElement("path",{d:"M "+(n+R)+" "+r+" A "+R+","+X/2+" 0 1,1 "+(n+R)+","+(r+X),stroke:"black",strokeWidth:a,fill:"none"})),t.name&&o.a.createElement("g",{transform:"translate("+(n+5+("queue-cylinder"===t.shape?2*R:0))+" "+r+")"},o.a.createElement("text",{x:0,y:X*("db-cylinder"===t.shape?.3:0),fill:"black",clipPath:"url(#clip-element-text-"+t.elementKey+")",fontSize:12},t.name.split("\n").map((function(e,n){return o.a.createElement("tspan",{key:t.elementKey+"T"+n,x:"0",dy:"1.2em"},e)}))),o.a.createElement("clipPath",{id:"clip-element-text-"+t.elementKey},o.a.createElement("rect",{x:0,y:0,width:j-10-(t.symbol?19:0)-("queue-cylinder"===t.shape?2*R:0),height:X*("db-cylinder"===t.shape?.8:1)}))),t.symbol&&o.a.createElement(q,{symbolKey:t.elementKey+"CS",x:n+j-16-3,y:r+3,width:16}))};function V(e){return h(e,H)}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{offsetElementsY:0};switch(e.kind){case"node":return Object.assign(e,{offsetElementsY:t.offsetElementsY}),void t.offsetElementsY++;case"row":Object.assign(e,{offsetElementsY:t.offsetElementsY});var n=0,r=t.offsetElementsY;return e.elements.forEach((function(e){H(e,t),n=Math.max(n,t.offsetElementsY),t.offsetElementsY=r})),void(t.offsetElementsY=n);case"column":return Object.assign(e,{offsetElementsY:t.offsetElementsY}),void e.elements.forEach((function(e){return H(e,t)}));default:d(e)}}function G(e){return h(e,z)}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{offsetElementsX:0};switch(e.kind){case"node":return Object.assign(e,{offsetElementsX:t.offsetElementsX}),void t.offsetElementsX++;case"row":return Object.assign(e,{offsetElementsX:t.offsetElementsX}),void e.elements.forEach((function(e){return z(e,t)}));case"column":Object.assign(e,{offsetElementsX:t.offsetElementsX});var n=0,r=t.offsetElementsX;return e.elements.forEach((function(e){z(e,t),n=Math.max(n,t.offsetElementsX),t.offsetElementsX=r})),void(t.offsetElementsX=n);default:d(e)}}function Z(e){return h(e,J)}function J(e){switch(e.kind){case"node":return Object.assign(e,{embeddedElementsX:1}),1;case"row":var t=e.elements.map(J).reduce((function(e,t){return e+t}),0);return Object.assign(e,{embeddedElementsX:t}),t;case"column":var n=Math.max.apply(Math,Object(O.a)(e.elements.map(J)).concat([0]));return Object.assign(e,{embeddedElementsX:n}),n;default:d(e)}}var $=function(e){var t=N(e),n=U(e),r=e.embeddedElementsX*j+(e.embeddedElementsX-1)*A+((e.embeddedElementsX-1)*e.borderIndexMaxX*2+e.borderIndexLeft+e.borderIndexRight)*L+(e.embeddedElementsX-1)*e.crossLayerPathSegmentOffsetMaxX*C,a=e.embeddedElementsY*X+(e.embeddedElementsY-1)*D+e.borderIndexTop*T+e.embeddedBorderIndexMaxTop*T+e.embeddedBorderIndexMaxBottom*S+e.embeddedMidPathSegmentY*C+e.borderIndexBottom*S;return o.a.createElement("g",{key:e.elementKey},"solid"===e.border&&o.a.createElement("rect",{x:t,y:n,width:r,height:a,fill:"none",strokeWidth:.5,stroke:"grey"}),"deployment-box"===e.border&&o.a.createElement("g",null,o.a.createElement("path",{d:"M "+(t+B)+" "+(n+B)+" L "+(t+B+W)+" "+n+" H "+(t+r-B+W)+" V "+(n+a-2*B)+" L "+(t+r-B)+" "+(n+a-B)+"H "+(t+B)+" Z",stroke:"black",strokeWidth:.5,fill:"none"}),o.a.createElement("path",{d:"M "+(t+B)+" "+(n+B)+" H "+(t+r-B)+" V "+(n+a-B),stroke:"black",strokeWidth:.5,fill:"none"}),o.a.createElement("path",{d:"M "+(t+r-B)+" "+(n+B)+" L "+(t+r-B+W)+" "+n,stroke:"black",strokeWidth:.5,fill:"none"})),e.name&&o.a.createElement("g",{transform:"translate("+(t+L)+" "+(n+5)+")"},o.a.createElement("text",{x:0,y:0,fill:"black",clipPath:"url(#clip-element-text-"+e.elementKey+")",fontSize:12},e.name.split("\n").map((function(t,n){return o.a.createElement("tspan",{key:e.elementKey+"T"+n,x:"0",dy:"1.2em"},t)}))),o.a.createElement("clipPath",{id:"clip-element-text-"+e.elementKey},o.a.createElement("rect",{x:0,y:0,width:r-2*L,height:T}))))};function Q(e){return h(e,ee)}function ee(e){!function e(t,n){switch(t.kind){case"node":return void Object.assign(t,{borderIndexMaxX:n});case"row":case"column":return Object.assign(t,{borderIndexMaxX:n}),void t.elements.forEach((function(t){return e(t,n)}));default:d(t)}}(e,te(e))}function te(e){switch(e.kind){case"node":return 0;case"row":case"column":return Math.max.apply(Math,Object(O.a)(e.elements.map(te)).concat([e.borderIndexLeft,e.borderIndexRight]));default:d(e)}}function ne(e){return h(e,re)}function re(e){switch(e.kind){case"node":return Object.assign(e,{borderIndexLeft:0}),0;case"row":var t=(e.elements.length>0?e.elements.map(re):[0])[0]+(e.border?1:0);return Object.assign(e,{borderIndexLeft:t}),t;case"column":var n=Math.max.apply(Math,Object(O.a)(e.elements.map(re)).concat([0]))+(e.border?1:0);return Object.assign(e,{borderIndexLeft:n}),n;default:d(e)}}function oe(e){return h(e,ae)}function ae(e){switch(e.kind){case"node":return Object.assign(e,{borderIndexRight:0}),0;case"row":var t=e.elements.length>0?e.elements.map(ae):[0],n=t[t.length-1]+(e.border?1:0);return Object.assign(e,{borderIndexRight:n}),n;case"column":var r=Math.max.apply(Math,Object(O.a)(e.elements.map(ae)).concat([0]))+(e.border?1:0);return Object.assign(e,{borderIndexRight:r}),r;default:d(e)}}function se(e){return g(e,ce)}function ce(e){ie(e.element),e.syntheticNodes.forEach((function(e){return Object.assign(e,{borderIndexTop:0})}))}function ie(e){switch(e.kind){case"node":return Object.assign(e,{borderIndexTop:0}),0;case"row":var t=Math.max.apply(Math,Object(O.a)(e.elements.map(ie)).concat([0]))+(e.border?1:0);return Object.assign(e,{borderIndexTop:t}),t;case"column":var n=(e.elements.length>0?e.elements.map(ie):[0])[0]+(e.border?1:0);return Object.assign(e,{borderIndexTop:n}),n;default:d(e)}}function le(e){return h(e,fe)}function fe(e){switch(e.kind){case"node":return Object.assign(e,{borderIndexBottom:0}),0;case"row":var t=Math.max.apply(Math,Object(O.a)(e.elements.map(fe)).concat([0]))+(e.border?1:0);return Object.assign(e,{borderIndexBottom:t}),t;case"column":var n=e.elements.length>0?e.elements.map(fe):[0],r=n[n.length-1]+(e.border?1:0);return Object.assign(e,{borderIndexBottom:r}),r;default:d(e)}}function me(e){return function(t,n){return e(t)-e(n)}}function ue(e){return function(t,n){return e(n)-e(t)}}function de(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){for(var r=0;;){if(r===t.length)return 0;var o=t[r](e,n);if(0!==o)return o;r++}}}function Ee(e){var t=new Map,n=0;return Array.from(e.entries()).sort(me((function(e){return e[0]}))).forEach((function(e){t.set(e[0],n),n+=e[1]})),t}function he(e){switch(e.kind){case"node":return e.offsetElementsY;case"row":case"column":return Math.max.apply(Math,Object(O.a)(e.elements.map(he)).concat([e.offsetElementsY]));default:d(e)}}function ge(e){return g(e,pe)}function pe(e){var t=_e(e.element),n=Ee(t);ye(e.element,t,n),e.syntheticNodes.forEach((function(e){return ye(e,t,n)}))}function _e(e){switch(e.kind){case"node":var t=new Map;return t.set(e.offsetElementsY,e.borderIndexBottom),t;case"row":case"column":var n=new Map;return n.set(he(e),e.borderIndexBottom),e.elements.map(_e).reduce((function(e,t){return Array.from(t.entries()).forEach((function(t){var n=Math.max(e.get(t[0])||0,t[1]);e.set(t[0],n)})),e}),n);default:d(e)}}function xe(e,t){for(var n=e.offsetElementsY,r=he(e)-1,o=0,a=n;a<=r;a++)o+=t.get(a)||0;return o}function ye(e,t,n){switch(e.kind){case"node":return void Object.assign(e,{borderIndexMaxBottom:t.get(e.offsetElementsY),borderIndexMaxPreviousBottom:n.get(e.offsetElementsY),embeddedBorderIndexMaxBottom:0});case"row":case"column":return Object.assign(e,{borderIndexMaxBottom:t.get(he(e)),borderIndexMaxPreviousBottom:n.get(e.offsetElementsY),embeddedBorderIndexMaxBottom:xe(e,t)}),void e.elements.forEach((function(e){return ye(e,t,n)}));default:d(e)}}function be(e){return g(e,ve)}function ve(e){var t=ke(e.element),n=Ee(t);Me(e.element,t,n),e.syntheticNodes.forEach((function(e){return Me(e,t,n)}))}function ke(e){switch(e.kind){case"node":var t=new Map;return t.set(e.offsetElementsY,e.borderIndexTop),t;case"row":case"column":var n=new Map;return n.set(e.offsetElementsY,e.borderIndexTop),e.elements.map(ke).reduce((function(e,t){return Array.from(t.entries()).forEach((function(t){var n=Object(I.a)(t,2),r=n[0],o=n[1],a=Math.max(e.get(r)||0,o);e.set(r,a)})),e}),n);default:d(e)}}function we(e,t){for(var n=e.offsetElementsY+1,r=he(e),o=0,a=n;a<=r;a++)o+=t.get(a)||0;return o}function Me(e,t,n){switch(e.kind){case"node":return void Object.assign(e,{borderIndexMaxTop:t.get(e.offsetElementsY),borderIndexMaxPreviousTop:n.get(e.offsetElementsY),embeddedBorderIndexMaxTop:0});case"row":case"column":return Object.assign(e,{borderIndexMaxTop:t.get(e.offsetElementsY),borderIndexMaxPreviousTop:n.get(e.offsetElementsY),embeddedBorderIndexMaxTop:we(e,t)}),void e.elements.forEach((function(e){return Me(e,t,n)}));default:d(e)}}function Ie(e){return h(e,Oe)}function Oe(e){switch(e.kind){case"node":return Object.assign(e,{embeddedElementsY:1}),1;case"row":var t=Math.max.apply(Math,Object(O.a)(e.elements.map(Oe)).concat([0]));return Object.assign(e,{embeddedElementsY:t}),t;case"column":var n=e.elements.map(Oe).reduce((function(e,t){return e+t}),0);return Object.assign(e,{embeddedElementsY:n}),n;default:d(e)}}function Pe(e){return e.from.offsetElementsY===e.to.offsetElementsY?e.from.offsetElementsX<=e.to.offsetElementsX:e.from.offsetElementsY<e.to.offsetElementsY}function Ye(e){return Pe(e)?e.from:e.to}function je(e){return Pe(e)?e.to:e.from}function Xe(e){return function(e){return e.from.offsetElementsX===e.to.offsetElementsX?e.from.offsetElementsY<=e.to.offsetElementsY:e.from.offsetElementsX<e.to.offsetElementsX}(e)?e.from:e.to}function Le(e,t,n){var r=e.offsetElementsY<=n.offsetElementsY,o=(j-(((r?e.lowerSideEdges:e.upperSideEdges)||0)-1)*C)/2;return{x:N(e)+o+t*C,y:U(e)+(r?X:0)}}var Te=function(e){var t=Le(e.from,e.fromIndex,e.to),n=U(Ye(e))+X+Ye(e).borderIndexMaxBottom*S+D/2+e.midPathSegmentOffsetY*C,r=Le(e.to,e.toIndex,e.from),a=e.selected?1.5:.5,s=e.to.offsetElementsY<=e.from.offsetElementsY,c=o.a.createElement("path",{d:"M "+(r.x+3)+" "+(r.y+5*(s?1:-1))+" L "+r.x+" "+r.y+" L "+(r.x-3)+" "+(r.y+5*(s?1:-1)),stroke:"black",strokeWidth:a,fill:"none"});if(e.lowerLayerEdge){var i=e.lowerLayerEdge,l=U(Ye(e.lowerLayerEdge))+X+Ye(e.lowerLayerEdge).borderIndexMaxBottom*S+D/2+i.midPathSegmentOffsetY*C,f=N(Xe(e))+j+Ye(e).borderIndexMaxX*L+(e.crossLayerPathSegmentOffsetX+1)*C;return o.a.createElement("g",{key:e.edgeIndex},o.a.createElement("path",{d:"M "+t.x+" "+t.y+" V "+n+" H "+f+" V "+l+" H "+r.x+" V "+r.y,stroke:"black",strokeWidth:a,fill:"none"}),c)}return o.a.createElement("g",{key:e.edgeIndex},o.a.createElement("path",{d:"M "+t.x+" "+t.y+" V "+n+" H "+r.x+" V "+r.y,stroke:"black",strokeWidth:a,fill:"none"}),c)};function Se(e){!function(e){var t=new Map;function n(e,n,r,o){var a=n.offsetElementsY<=r.offsetElementsY?"LOWER":"UPPER",s=n.elementKey+a,c=t.get(s)||{node:n,side:a,edgeEnds:[]};c.edgeEnds.push({edge:e,reverseNode:r,setIndex:o}),t.set(s,c)}e.forEach((function(e){n(e,e.from,e.to,(function(t){return Object.assign(e,{fromIndex:t})})),n(e,e.to,e.from,(function(t){return Object.assign(e,{toIndex:t})}))})),Array.from(t.values()).forEach((function(e){var t=e.edgeEnds,n=e.node,r=e.side,o=t.filter((function(e){return e.reverseNode.offsetElementsY===n.offsetElementsY})),a=o.filter((function(e){return e.reverseNode.offsetElementsX<=n.offsetElementsX})),s=o.filter((function(e){return e.reverseNode.offsetElementsX>n.offsetElementsX})),c=t.filter((function(e){return e.reverseNode.offsetElementsY!==n.offsetElementsY})),i=c.filter((function(e){return e.reverseNode.offsetElementsX<=n.offsetElementsX})),l=c.filter((function(e){return e.reverseNode.offsetElementsX>n.offsetElementsX}));a.sort(de(ue((function(e){return e.reverseNode.offsetElementsX})),ue((function(e){return e.edge.edgeIndex})))),i.sort(de(me((function(e){return e.reverseNode.offsetElementsX})),ue((function(e){return e.reverseNode.offsetElementsY})))),l.sort(de(me((function(e){return e.reverseNode.offsetElementsX})),me((function(e){return e.reverseNode.offsetElementsY})))),s.sort(de(ue((function(e){return e.reverseNode.offsetElementsX})),me((function(e){return e.edge.edgeIndex})))),a.concat(i).concat(l).concat(s).forEach((function(e,t){e.setIndex(t)})),"UPPER"===r?Object.assign(n,{upperSideEdges:t.length}):Object.assign(n,{lowerSideEdges:t.length})}))}(e.edges);var t=e.edges;return t.forEach((function(e){e.lowerLayerEdge&&Object.assign(e.lowerLayerEdge,{fromIndex:0,toIndex:De(e)})})),e}function Ae(e){return Pe(e)?e.fromIndex:e.toIndex}function De(e){return Pe(e)?e.toIndex:e.fromIndex}function Ce(e){return Math.abs(e.from.offsetElementsY-e.to.offsetElementsY)>=2}function Be(e){var t=Math.max.apply(Math,Object(O.a)(M(e.element).map((function(e){return e.elementKey})))),n=new Map;k(e.element).filter((function(e){return e.visible})).forEach((function(e){return n.set(e.offsetElementsX+"_"+e.offsetElementsY,!0)}));var r=[],o=e.edges.filter(Ce).filter((function(e){for(var t=je(e),r=Ye(e),o=Math.min(r.offsetElementsX,t.offsetElementsX),a=r.offsetElementsY+1;a<=t.offsetElementsY-1;a++)if(n.has(o+"_"+a))return!0;return!1})).map((function(e){var n=je(e),o=Ye(e);t++;var a=Object.assign(p(),{elementKey:t,offsetElementsY:n.offsetElementsY-1,offsetElementsX:Math.min(o.offsetElementsX,n.offsetElementsX)});r.push(a);var s={lowerLayerEdge:{from:a,to:n,isLowerLayerEdge:!0,originalEdge:e}};return Object.assign(e,s),s.lowerLayerEdge}));return Object.assign(e,{syntheticNodes:r,syntheticEdges:o})}function We(e){return function(e){var t=new Map;e.forEach((function(e){var n=Ye(e).offsetElementsY,r=t.get(n)||[];r.push(e),t.set(n,r)})),Array.from(t.values()).forEach(Ke)}(e.edges.concat(e.syntheticEdges)),e}function Ke(e){var t=new Map;e.forEach((function(e){var n=Ye(e),r=n.offsetElementsY+"_"+n.offsetElementsX,o=t.get(r)||[];o.push(e),t.set(r,o)}));var n=Array.from(t.keys());n.sort();var r=0;n.forEach((function(e){var n=t.get(e),o=n.filter((function(e){return je(e).offsetElementsY===Ye(e).offsetElementsY})),a=o.filter((function(e){return je(e).offsetElementsX<=Ye(e).offsetElementsX})),s=o.filter((function(e){return je(e).offsetElementsX>Ye(e).offsetElementsX})),c=n.filter((function(e){return je(e).offsetElementsY!==Ye(e).offsetElementsY})),i=c.filter((function(e){return je(e).offsetElementsX===Ye(e).offsetElementsX?!Ce(e)&&(!e.isLowerLayerEdge&&De(e)-((je(e).upperSideEdges||1)-1)/2<Ae(e)-((Ye(e).lowerSideEdges||1)-1)/2):je(e).offsetElementsX<=Ye(e).offsetElementsX})),l=c.filter((function(e){return je(e).offsetElementsX===Ye(e).offsetElementsX?!!Ce(e)||(!!e.isLowerLayerEdge||De(e)-((je(e).upperSideEdges||1)-1)/2>=Ae(e)-((Ye(e).lowerSideEdges||1)-1)/2):je(e).offsetElementsX>Ye(e).offsetElementsX}));a.sort(de(me((function(e){return je(e).offsetElementsX})),ue((function(e){return e.edgeIndex})))),i.sort(de(me((function(e){return je(e).offsetElementsX})),me((function(e){return e.edgeIndex})))),l.sort(de(ue((function(e){return je(e).offsetElementsX})),me((function(e){return e.isLowerLayerEdge?Ye(e.originalEdge).offsetElementsX:0})),me((function(e){return e.isLowerLayerEdge?e.originalEdge.edgeIndex:0})),ue((function(e){return e.edgeIndex})))),s.sort(de(me((function(e){return je(e).offsetElementsX})),ue((function(e){return e.edgeIndex}))));var f=a.concat(i),m=s.concat(l);function u(e,t,n){var o=r+t;Object.assign(e,{midPathSegmentOffsetY:o})}f.forEach((function(e,t){return u(e,t)})),m.forEach((function(e,t){return u(e,t)})),r+=Math.max(f.length,m.length)}))}function Re(e){return h(e,Ne)}function Ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{elementKey:0};switch(e.kind){case"node":return Object.assign(e,{elementKey:t.elementKey}),void t.elementKey++;case"row":case"column":return Object.assign(e,{elementKey:t.elementKey}),t.elementKey++,void e.elements.forEach((function(e){return Ne(e,t)}));default:d(e)}}function Ue(e){return g(e,qe)}function qe(e){var t=he(e.element),n=function(e){var t=new Map;return e.forEach((function(e){var n=Ye(e).offsetElementsY,r=t.get(n)||0;t.set(n,Math.max(r,e.midPathSegmentOffsetY))})),t}(e.edges.concat(e.syntheticEdges)),r=function(e,t){var n=new Map,r=0;return Array.from(Array(t+1).keys()).forEach((function(t){n.set(t,r),r+=e.get(t)||0})),n}(n,t);Ve(e.element,n,r),e.syntheticNodes.forEach((function(e){return Ve(e,n,r)}))}function Fe(e,t){for(var n=e.offsetElementsY,r=he(e)-1,o=0,a=n;a<=r;a++)o+=t.get(a)||0;return o}function Ve(e,t,n){switch(e.kind){case"node":return void Object.assign(e,{midPathSegmentOffsetMaxY:t.get(e.offsetElementsY)||0,midPathSegmentOffsetMaxPreviousY:n.get(e.offsetElementsY)||0,embeddedMidPathSegmentY:0});case"row":case"column":return Object.assign(e,{midPathSegmentOffsetMaxY:t.get(e.offsetElementsY)||0,midPathSegmentOffsetMaxPreviousY:n.get(e.offsetElementsY)||0,embeddedMidPathSegmentY:Fe(e,t)}),void e.elements.forEach((function(e){return Ve(e,t,n)}));default:d(e)}}function He(e){return e.edges.concat(e.syntheticEdges).forEach((function(e,t){Object.assign(e,{edgeIndex:t})})),e}function Ge(e){return function(e){var t=new Map;e.filter((function(e){return e.lowerLayerEdge})).forEach((function(e){var n=Xe(e).offsetElementsX,r=t.get(n)||[];r.push(e),t.set(n,r)})),Array.from(t.values()).forEach(ze)}(e.edges),e}function ze(e){var t=new Map;e.forEach((function(e){var n=Xe(e),r=n.offsetElementsY+"_"+n.offsetElementsX,o=t.get(r)||[];o.push(e),t.set(r,o)}));var n=Array.from(t.keys());n.sort();var r=0;n.forEach((function(e){var n=t.get(e);n.sort(de(me((function(e){return je(e).offsetElementsX})),me((function(e){return e.edgeIndex})))),n.forEach((function(e,t){return function(e,t){var n=r+t;Object.assign(e,{crossLayerPathSegmentOffsetX:n})}(e,t)})),r+=n.length}))}function Ze(e){return g(e,Je)}function Je(e){var t,n=(t=e.edges,Math.max.apply(Math,Object(O.a)(t.map((function(e){return(e.crossLayerPathSegmentOffsetX||0)+1}))).concat([0])));!function e(t,n){switch(t.kind){case"node":return void Object.assign(t,{crossLayerPathSegmentOffsetMaxX:n});case"row":case"column":return Object.assign(t,{crossLayerPathSegmentOffsetMaxX:n}),void t.elements.forEach((function(t){return e(t,n)}));default:d(t)}}(e.element,n)}function $e(e){switch(e.kind){case"node":return 2*Y+e.offsetElementsX*A+(e.offsetElementsX+1)*j+e.borderIndexMaxX*(e.offsetElementsX+1)*2*L+e.crossLayerPathSegmentOffsetMaxX*(e.offsetElementsX+1)*C;case"row":case"column":return Math.max.apply(Math,Object(O.a)(e.elements.map($e)).concat([0]));default:d(e)}}function Qe(e){switch(e.kind){case"node":return 2*P+(e.offsetElementsY+1)*D+(e.offsetElementsY+1)*X+(e.borderIndexMaxPreviousTop+e.borderIndexMaxTop)*T+(e.borderIndexMaxPreviousBottom+e.borderIndexMaxBottom)*S+(e.midPathSegmentOffsetMaxPreviousY+e.midPathSegmentOffsetMaxY)*C;case"row":case"column":return Math.max.apply(Math,Object(O.a)(e.elements.map(Qe)).concat([0]));default:d(e)}}var et=function(e){var t=Object(r.useState)(e.initialGraph),n=Object(I.a)(t,2),a=n[0],s=n[1];function c(e){var t;t=!e.selected,e.selected=t,s((function(n){return n.edges.filter((function(t){return t.from===e||t.to===e})).forEach((function(e){return e.selected=t})),E(n.element,n.edges,n.syntheticNodes,n.syntheticEdges)}))}return[a].map(Re).map(G).map(V).map(Be).map(ne).map(oe).map(se).map(le).map(Q).map(be).map(ge).map(Z).map(Ie).map(He).map(Se).map(We).map(Ue).map(Ge).map(Ze).map((function(e){return o.a.createElement("svg",{viewBox:"0 0 "+$e(e.element)+" "+Qe(e.element)},w(e.element).filter((function(e){return e.border})).map($),k(e.element).map((function(e){return o.a.createElement(F,{key:e.elementKey+"O",node:e,onNodeClick:c})})),e.edges.map(Te))}))[0]},tt=function(){var e=p("Some node"),t=p(),n=p(),r=p({name:"Component node",symbol:"component"}),a=p({name:"Another component node",symbol:"component"}),s=p(),c=p("Some node with long text"),i=p(),l=p(),f=p(),m=p(),u=p(),d=p(),h=p(),g=p(),x=p(),y=p(),b=p({visible:!1}),k=p(),w=p(),M=p(),I={kind:"column",elements:[{kind:"row",name:"Top row",border:"solid",elements:[{kind:"column",name:"Left column",border:"solid",elements:[e,t]},{kind:"column",name:"Right column",border:"solid",elements:[{kind:"row",name:"Nested row",border:"solid",elements:[n,r]},a,s]},b,{kind:"column",elements:[w,_(),M]},k]},{kind:"row",elements:[c,i,l,f,m]},{kind:"row",name:"Bottom row",border:"solid",elements:[{kind:"row",name:"Left row in row",border:"solid",elements:[u,d]},{kind:"row",name:"Right row in row",border:"solid",elements:[h,g,x,y]}]}]},O=[v(e,c),v(e,t),v(n,e),v(n,e),v(n,r),v(n,r),v(n,c),v(n,c),v(n,l),v(n,l),v(n,f),v(r,f),v(r,i),v(r,y),v(s,c),v(s,c),v(s,l),v(s,f),v(s,m),v(s,m),v(c,i),v(u,i),v(d,i),v(h,i),v(g,i),v(x,i),v(x,i),v(y,i),v(u,m),v(d,m),v(h,m),v(g,m),v(x,m),v(y,m),v(y,x),v(y,x),v(k,y),v(w,M)];return o.a.createElement(et,{initialGraph:E(I,O)})};function nt(){var e=x("Content Site Map"),t=x("Content View"),n={kind:"column",elements:[{kind:"row",name:"Content View",border:"deployment-box",elements:[e,t]}]},r=x("Search View"),o=x("PDP View"),a={kind:"row",elements:[_(),_(),{kind:"row",name:"PDP View",border:"deployment-box",elements:[_(),r,_(),_(),_(),_(),o,_(),_(),_()]}]},s=x("Site Map Generator"),c={kind:"column",elements:[_(),{kind:"row",name:"Site Map Generator",border:"deployment-box",elements:[s]}]},i=y("FACTFinder DB"),l=x("FACTFinder API"),f=y("FACTFinder Feed\nService DB"),m=x("FACTFinder Updater"),u=x("Product Importer"),d=x("Product Campaigns\nImporter"),h=x("Category Importer"),g={kind:"column",elements:[{kind:"row",elements:[i,{kind:"row",name:"FACT Finder",border:"deployment-box",elements:[_(),l,_()]}]},{kind:"row",elements:[f,{kind:"column",name:"FACT Finder Feed Service",border:"deployment-box",elements:[{kind:"row",elements:[_(),m]},{kind:"row",elements:[u,d,h]}]}]}]},p=[v(l,i),v(m,l),v(m,f),v(u,f),v(d,f),v(h,f)],k=y("Product Service DB"),w=x("Product API"),M=x("Stock API"),I=x("Product Importer"),O=x("Product Campaigns\nImporter"),P=x("Nightly Stock Importer"),Y=x("Near Time Stock\nImporter"),j=x("Delivery Time Importer"),X=x("Category Importer"),L={kind:"row",elements:[{kind:"column",elements:[_(),k]},{kind:"column",name:"Product Service",border:"deployment-box",elements:[{kind:"row",elements:[_(),_(),w,M]},_(),{kind:"row",elements:[I,O,P,Y,j,X]}]}]},T=[v(w,k),v(M,k),v(I,k),v(O,k),v(P,k),v(Y,k),v(j,k),v(X,k)],S=b("Product Stream"),A=x("Product Exporter"),D=b("Product Campaigns\nStream"),C=x("Product Campaigns\nExporter"),B=b("Nightly Stock Stream"),W=x("Nightly Stock Exporter"),K={kind:"column",elements:[{kind:"row",elements:[S,D,B]},{kind:"row",name:"Product Exporter Service",border:"deployment-box",elements:[A,C,W]}]},R=[v(A,S),v(C,D),v(W,B)],N=b("Stock Stream"),U=x("Stock Exporter"),q={kind:"column",elements:[N,{kind:"row",name:"Stock Exporter Service",border:"deployment-box",elements:[U]}]},F=[v(U,N)],V=b("Delivery Time Stream"),H=x("Delivery Time Exporter"),G={kind:"column",elements:[V,{kind:"row",name:"Delivery Time\nExporter Service",border:"deployment-box",elements:[H]}]},z=[v(H,V)],Z=b("Category Stream"),J=x("Category Exporter"),$={kind:"column",elements:[Z,{kind:"row",name:"Category Exporter Service",border:"deployment-box",elements:[J]}]},Q=[v(J,Z)],ee={kind:"row",elements:[c,g,L]},te=p.concat(T),ne={kind:"row",elements:[_(),_(),_(),_(),_(),_(),K,q,G,$]},re=R.concat(F).concat(z).concat(Q);return E({kind:"row",elements:[n,{kind:"column",elements:[a,ee,ne]}]},te.concat(re).concat([v(o,w),v(o,M),v(r,l),v(s,f),v(u,S),v(d,D),v(h,Z),v(I,S),v(O,D),v(P,B),v(Y,N),v(j,V),v(X,Z)]).concat([v(t,l),v(t,w)]))}var rt=function(){return o.a.createElement(et,{initialGraph:nt()})},ot=function(){return o.a.createElement(c.a,null,o.a.createElement("div",null,o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(c.b,{to:"/"},"Editor")),o.a.createElement("li",null,o.a.createElement(c.b,{to:"/architecture"},"Sample Architecture")),o.a.createElement("li",null,o.a.createElement(c.b,{to:"/new-layouting"},"New Layouting")),o.a.createElement("li",null,o.a.createElement(c.b,{to:"/new-architecture"},"New Sample Architecture"))),o.a.createElement("hr",null),o.a.createElement(i.c,null,o.a.createElement(i.a,{exact:!0,path:"/"},o.a.createElement(l.a,null)),o.a.createElement(i.a,{path:"/architecture"},o.a.createElement(u,null)),o.a.createElement(i.a,{path:"/new-layouting"},o.a.createElement(tt,null)),o.a.createElement(i.a,{path:"/new-architecture"},o.a.createElement(rt,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(ot,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},88:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++)if(void 0===t[n])throw new Error("Empty array elements are not allowed.");var r=e;return t.forEach((function(e){if(void 0===r.elements[e])throw new Error("Indices must refer to a node that does exist. Index "+e+" Array length "+r.elements.length);r=r.elements[e]})),r}function o(e,t){return t.map((function(t){return function(e,t){return{from:r(e,t.from),to:r(e,t.to)}}(e,t)}))}n.d(t,"a",(function(){return o}))},89:function(e,t,n){"use strict";function r(e){if("string"===typeof e)return{kind:"node",name:e};if(!("elements"in e))return Object.assign(e,{kind:"node"});for(var t=0;t<e.elements.length;t++)if(void 0===e.elements[t])throw new Error("Empty array elements are not allowed.");if("name"in e)return{kind:"group",name:e.name,elements:e.elements.map(r)};switch(e.kind){default:case"stack":case"layer":return{kind:e.kind,elements:e.elements.map(r)}}}function o(e){return{kind:"stack",elements:e.map((function(e){return{kind:"layer",elements:e.map(r)}}))}}n.d(t,"a",(function(){return o}))},90:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(4),s=5,c=5,i=150,l=40,f=30,m=10,u=10,d=10,E=20,h=10;function g(e){switch(e.kind){case"stack":return Math.max.apply(Math,Object(a.a)(e.elements.map(g)));case"layer":return e.elements.map(g).map((function(e,t){return e+(t>0?d:0)})).reduce((function(e,t){return e+t}),0);case"group":return e.elements.map(g).map((function(e,t){return e+(t>0?d:0)})).reduce((function(e,t){return e+t}),0)+2*u;case"node":return i*(e.size||1)}}function p(e){return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(t.kind){case"stack":var o=g(t);return t.elements.forEach((function(t){e(t,n,o)})),void(n.x+=o+d);case"layer":var a=n.x;return n.x=a+(r-g(t))/2,t.elements.forEach((function(t){e(t,n,r)})),void(n.x=a);case"group":return Object.assign(t,{x:n.x}),n.x+=u,t.elements.forEach((function(t){e(t,n,r)})),void(n.x+=u);case"node":return Object.assign(t,{x:n.x}),void(n.x+=i*(t.size||1)+d)}}(e.stack,{x:c}),e}function _(e){return function(t,n){return e(t)-e(n)}}function x(e){return function(t,n){return e(n)-e(t)}}function y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){for(var r=0;;){if(r===t.length)return 0;var o=t[r](e,n);if(0!==o)return o;r++}}}function b(e){return e.from.layerIndex===e.to.layerIndex?e.from.x<=e.to.x:e.from.layerIndex<e.to.layerIndex}function v(e){return b(e)?e.from:e.to}function k(e){return b(e)?e.to:e.from}function w(e){return function(e){var t=new Map;e.map((function(e,t){return Object.assign(e,{edgeIndex:t})})).forEach((function(e){var n=v(e).layerIndex,r=t.get(n)||[];r.push(e),t.set(n,r)})),Array.from(t.values()).forEach(M)}(e.edges),e}function M(e){var t=new Map;e.forEach((function(e){var n=v(e).key,r=t.get(n)||[];r.push(e),t.set(n,r)}));var n=Array.from(t.keys());n.sort();var r=0;n.forEach((function(e){var n=t.get(e),o=n.filter((function(e){return k(e).layerIndex===v(e).layerIndex})),a=o.filter((function(e){return k(e).x<=v(e).x})),s=o.filter((function(e){return k(e).x>v(e).x})),c=n.filter((function(e){return k(e).layerIndex!==v(e).layerIndex})),i=c.filter((function(e){return k(e).x<=v(e).x})),l=c.filter((function(e){return k(e).x>v(e).x}));a.sort(y(_((function(e){return k(e).x})),_((function(e){return e.edgeIndex})))),i.sort(y(_((function(e){return k(e).x})),_((function(e){return e.edgeIndex})))),l.sort(y(x((function(e){return k(e).x})),x((function(e){return e.edgeIndex})))),s.sort(y(_((function(e){return k(e).x})),_((function(e){return e.edgeIndex}))));var f=a.concat(i),m=s.concat(l);function u(t,n,o){var a=v(t).layerIndex,s=r+n;Object.assign(t,{key:e+"_"+o+"_"+s,index:s,layerIndex:a})}f.forEach((function(e,t){return u(e,t,"B")})),m.forEach((function(e,t){return u(e,t,"A")})),r+=Math.max(f.length,m.length)}))}function I(e,t){var n=new Map;return e.forEach((function(e){var t=v(e).layerIndex,r=n.get(t)||[];r.push(e),n.set(t,r)})),Array.from(Array(t).keys()).map((function(e){var t,r=(null===(t=n.get(e))||void 0===t?void 0:t.map((function(e){return e.index})))||[0];return Math.max.apply(Math,Object(a.a)(r))*h}))}function O(e){switch(e.kind){case"stack":return e.elements.map(O).map((function(e,t){return e+(t>0?E:0)})).reduce((function(e,t){return e+t}),0);case"layer":return Math.max.apply(Math,Object(a.a)(e.elements.map(O)));case"group":return f+Math.max.apply(Math,Object(a.a)(e.elements.map(O)))+m;case"node":return e.isPlaceholder?0:l}}function P(e){switch(e.kind){case"stack":return 0===e.elements.length?0:P(e.elements[0]);case"layer":return Math.max.apply(Math,Object(a.a)(e.elements.map(P)));case"group":return f+Math.max.apply(Math,Object(a.a)(e.elements.map(P)))+m;case"node":return e.isPlaceholder?0:l}}function Y(e){switch(e.kind){case"stack":return 0===e.elements.length?0:Y(e.elements[0]);case"layer":return Math.max.apply(Math,Object(a.a)(e.elements.map(Y)));case"group":return Math.max.apply(Math,Object(a.a)(e.elements.map(Y)))+1;case"node":return 0}}function j(e){var t=I(e.edges,e.stack.elements.length);return function e(t,n,r){switch(t.kind){case"stack":var o={y:n.y,nodeY:n.nodeY,belowLayerY:n.belowLayerY};return t.elements.forEach((function(t,o){e(t,n,r)})),n.y=o.y,n.nodeY=o.nodeY,void(n.belowLayerY=o.belowLayerY);case"layer":return n.nodeY=n.y+Y(t)*f,n.groupHeight=Y(t)*(f+m)+l,n.belowLayerY=n.y+P(t)+E,t.elements.forEach((function(t){e(t,n,r)})),void(n.y+=O(t)+E);case"group":var a=r.slice(0,t.layerIndex).reduce((function(e,t){return e+t}),0);return Object.assign(t,{y:n.y+a,height:n.groupHeight}),n.y+=f,n.groupHeight-=f+m,t.elements.forEach((function(t){e(t,n,r)})),n.y-=f,void(n.groupHeight+=f+m);case"node":var s=r.slice(0,t.layerIndex).reduce((function(e,t){return e+t}),0);return void Object.assign(t,{y:n.nodeY+s,belowLayerY:n.belowLayerY+s})}}(e.stack,{y:s,nodeY:0,groupHeight:0,belowLayerY:0},t),e}function X(e){return function(e){var t=new Map;function n(e,n,r){var o=e.layerIndex<=n.layerIndex?"LOWER":"UPPER",a=e.key+o,s=t.get(a)||{node:e,side:o,edgeEnds:[]};s.edgeEnds.push({reverseNode:n,setIndex:r}),t.set(a,s)}e.forEach((function(e){n(e.from,e.to,(function(t){return Object.assign(e,{fromIndex:t})})),n(e.to,e.from,(function(t){return Object.assign(e,{toIndex:t})}))})),Array.from(t.values()).forEach((function(e){var t=e.edgeEnds,n=e.node,r=e.side,o=t.filter((function(e){return e.reverseNode.layerIndex===n.layerIndex})),a=o.filter((function(e){return e.reverseNode.x<=n.x})),s=o.filter((function(e){return e.reverseNode.x>=n.x})),c=t.filter((function(e){return e.reverseNode.layerIndex!==n.layerIndex}));a.sort(x((function(e){return e.reverseNode.x}))),c.sort(_((function(e){return e.reverseNode.x}))),s.sort(x((function(e){return e.reverseNode.x}))),a.concat(c).concat(s).forEach((function(e,t){e.setIndex(t)})),"UPPER"===r?Object.assign(n,{upperSideEdges:t.length}):Object.assign(n,{lowerSideEdges:t.length})}))}(e.edges),e}function L(e){switch(e.kind){case"stack":return e.elements.flatMap((function(e){return e.elements})).flatMap(L);case"group":return e.elements.flatMap(L);case"node":return[e]}}function T(e){switch(e.kind){case"stack":return e.elements.flatMap((function(e){return e.elements})).flatMap(T);case"group":return[e].concat(e.elements.flatMap(T));case"node":return[]}}var S=function(e){var t=.4*e.width,n=.15*e.width;return o.a.createElement("g",{key:e.symbolKey},o.a.createElement("rect",{x:e.x+t/2,y:e.y,width:.8*e.width,height:1.1*e.width,fill:"none",strokeWidth:.5,stroke:"black"}),o.a.createElement("rect",{x:e.x,y:e.y+n,width:t,height:n,fill:"lightgrey",strokeWidth:.5,stroke:"black"}),o.a.createElement("rect",{x:e.x,y:e.y+3*n,width:t,height:n,fill:"lightgrey",strokeWidth:.5,stroke:"black"}))},A=function(e){if(e.isPlaceholder)return null;var t="component"===e.symbol;return o.a.createElement("g",{key:e.key},o.a.createElement("rect",{"data-testid":"rect",x:e.x,y:e.y,width:g(e),height:l,fill:"lightgrey",strokeWidth:.5,stroke:"black"}),o.a.createElement("text",{x:e.x+5,y:e.y+l/2,fill:"black",clipPath:"url(#clip-element-text-"+e.key+")"},e.name),o.a.createElement("clipPath",{id:"clip-element-text-"+e.key},o.a.createElement("rect",{x:e.x+5,y:e.y,width:g(e)-10-(t?15:0),height:l})),t?o.a.createElement(S,{symbolKey:e.key+"CS",x:e.x+g(e)-12-3,y:e.y+3,width:12}):"")},D=function(e){return o.a.createElement("g",{key:e.key},o.a.createElement("rect",{x:e.x,y:e.y,width:g(e),height:e.height,fill:"none",strokeWidth:.5,stroke:"grey"}),o.a.createElement("text",{x:e.x+u,y:e.y+l/2,fill:"black",clipPath:"url(#clip-element-text-"+e.key+")"},e.name),o.a.createElement("clipPath",{id:"clip-element-text-"+e.key},o.a.createElement("rect",{x:e.x+u,y:e.y,width:g(e)-2*u,height:l})))};function C(e,t,n){var r=e.layerIndex<=n.layerIndex,o=(g(e)-((r?e.lowerSideEdges:e.upperSideEdges)-1)*h)/2;return{x:e.x+o+t*h,y:e.y+(r?O(e):0)}}var B=function(e){var t=C(e.from,e.fromIndex,e.to),n=v(e).belowLayerY-E/2+e.index*h,r=C(e.to,e.toIndex,e.from);return o.a.createElement("path",{key:e.key,d:"M "+t.x+" "+t.y+" L "+t.x+" "+n+" L "+r.x+" "+n+" L "+r.x+" "+r.y,stroke:"black",strokeWidth:.5,fill:"none"})};function W(e){switch(e.kind){case"stack":return e.elements.map(W).reduce((function(e,t){return e+t}),0);case"layer":case"group":return Math.max.apply(Math,Object(a.a)(e.elements.map(W)));case"node":return 1}}function K(e){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(t.kind){case"stack":return void t.elements.forEach((function(t){e(t,n),n+=W(t)}));case"layer":return void t.elements.forEach((function(t){e(t,n)}));case"group":return Object.assign(t,{layerIndex:n}),void t.elements.forEach((function(t){e(t,n)}));case"node":return void Object.assign(t,{layerIndex:n})}}(e.stack),e}function R(e){return{stack:e.stack,edges:e.edges.flatMap((function(t){if(Math.abs(t.from.layerIndex-t.to.layerIndex)<=1)return t;for(var n=Math.min(t.from.layerIndex,t.to.layerIndex),r=Math.max(t.from.layerIndex,t.to.layerIndex),o=[],a=t.from.layerIndex<t.to.layerIndex?t.from:t.to,s=t.from.layerIndex>=t.to.layerIndex?t.from:t.to,c=n+1;c<r;c++){var i={kind:"node",name:"",size:.01,isPlaceholder:!0,layerIndex:c};e.stack.elements[c].elements.splice(0,0,i),o.push({from:a,to:i}),a=i}return o.push({from:a,to:s}),o}))}}function N(e){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{globalCounter:0};switch(t.kind){case"stack":return void t.elements.forEach((function(t){return e(t,n)}));case"layer":return void t.elements.forEach((function(t){return e(t,n)}));case"group":return Object.assign(t,{key:""+n.globalCounter}),n.globalCounter++,void t.elements.forEach((function(t){return e(t,n)}));case"node":return Object.assign(t,{key:""+n.globalCounter}),void n.globalCounter++}}(e.stack),e}n.d(t,"a",(function(){return U}));var U=function(e){return[e].map(K).map(R).map(N).map(p).map(w).map(j).map(X).map((function(e){var t=I(e.edges,e.stack.elements.length),n=g(e.stack)+2*c,r=O(e.stack)+E+t.reduce((function(e,t){return e+t}))+2*s;return o.a.createElement("svg",{viewBox:"0 0 "+n+" "+r},L(e.stack).map(A),T(e.stack).map(D),e.edges.map(B))}))[0]}}},[[193,1,2]]]);
//# sourceMappingURL=main.db6490f5.chunk.js.map