(this["webpackJsonpsvg-experiments"]=this["webpackJsonpsvg-experiments"]||[]).push([[0],{190:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Editor}));var _home_runner_work_svg_experiments_svg_experiments_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(52),_indicesToReferences__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(89),_stringsToNodes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(90),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),_parseGraph__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(191),_Diagram__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(91),_Editor_css__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(402),_Editor_css__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_Editor_css__WEBPACK_IMPORTED_MODULE_6__),graphAsString='var stack = stringsToNodes([\n    [\n        {name: "group 1", elements: [\n            "element 11", \n            {name: "element 2", size: 1.5, symbol: "component"}, \n            {name: "an element with long text", symbol: "component"}            \n        ]},\n        {name: "group 2", elements: ["element 4"]}\n    ],\n    [\n        {name: "group 3", elements: ["element 1", "element 2"]},\n        {name: "group 4", elements: [\n            {name: "group 6", elements: ["element 4"]}, \n            {name: "placeholder", size: 0.3, isPlaceholder: true}, \n            "element 3"\n        ]},\n        "node on top level", \n        {name: "an element with long text", symbol: "component"}     \n    ],\n    [\n        {name: "group 5", elements: [\n            "element 1", "element 2", "element 3", \n            {name: "element with changed name", size: 1.5}, \n            {name: "element 5", size: 0.7}]}\n    ]\n]);\n\nvar edgeIndices = [\n    {from: [0, 0, 0],    to: [1, 3]},\n    {from: [0, 0, 1],    to: [1, 0, 0]},\n    {from: [0, 0, 2],    to: [1, 1, 0, 0]},\n    {from: [0, 1, 0],    to: [1, 0, 1]},\n    {from: [1, 1, 0, 0], to: [2, 0, 2]},\n    {from: [1, 0, 1],    to: [2, 0, 4]},\n    {from: [1, 0, 1],    to: [2, 0, 3]},\n    {from: [1, 0, 1],    to: [2, 0, 2]},\n    {from: [1, 0, 1],    to: [2, 0, 1]},\n    {from: [1, 0, 1],    to: [2, 0, 0]},\n    {from: [2, 0, 0],    to: [1, 0, 0]},\n    {from: [2, 0, 1],    to: [1, 0, 0]},\n    {from: [2, 0, 0],    to: [2, 0, 3]},\n    {from: [2, 0, 1],    to: [2, 0, 3]},\n    {from: [2, 0, 4],    to: [2, 0, 3]},\n    {from: [0, 0, 0],    to: [0, 0, 2]},\n    {from: [0, 0, 0],    to: [0, 0, 1]},\n    {from: [0, 0, 0],    to: [1, 0, 0]},\n    {from: [0, 0, 0],    to: [1, 0, 0]},\n    {from: [0, 1, 0],    to: [1, 1, 1]},\n    {from: [1, 1, 1],    to: [2, 0, 2]},\n    {from: [0, 1, 0],    to: [1, 1, 2]},\n    {from: [1, 0, 1],    to: [1, 0, 0]},\n    {from: [0, 0, 0],    to: [2, 0, 0]},\n    {from: [0, 0, 0],    to: [2, 0, 1]},\n    {from: [1, 0, 1],    to: [1, 1, 0, 0]}\n];\nvar edges = indicesToReferences(stack, edgeIndices);\n\nvar graph = {\n    stack: stack,\n    edges: edges\n};\n\ngraph\n',indicesToReferences=_indicesToReferences__WEBPACK_IMPORTED_MODULE_1__.a,stringsToNodes=_stringsToNodes__WEBPACK_IMPORTED_MODULE_2__.a,initialGraph=eval(graphAsString),Editor=function(){var e=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)(initialGraph),t=Object(_home_runner_work_svg_experiments_svg_experiments_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(e,2),n=t[0],r=t[1],o=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)(""),s=Object(_home_runner_work_svg_experiments_svg_experiments_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(o,2),a=s[0],i=s[1];return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div",{id:"parent",className:"App"},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div",{id:"graph"},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_Diagram__WEBPACK_IMPORTED_MODULE_5__.a,{stack:n.stack,edges:n.edges})),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("textarea",{cols:100,rows:45,onChange:function(e){var t=Object(_parseGraph__WEBPACK_IMPORTED_MODULE_4__.a)(e.target.value);"string"===typeof t?i(t):(r(t),i(""))},defaultValue:graphAsString}),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p",{className:"error-message"},a)))}},191:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return parseGraph}));var _indicesToReferences__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(89),_stringsToNodes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(90),indicesToReferences=_indicesToReferences__WEBPACK_IMPORTED_MODULE_0__.a,stringsToNodes=_stringsToNodes__WEBPACK_IMPORTED_MODULE_1__.a;function parseGraph(text){try{var graph=eval(text);return void 0===graph?"Script is not returning a graph object!":void 0===graph.stack?"Property layers is missing in graph object!":void 0===graph.edges?"Property edges is missing in graph object!":graph.edges.every((function(e){return void 0!==e.from}))?graph.edges.every((function(e){return void 0!==e.to}))?graph:"Property to must be defined on every edge!":"Property from must be defined on every edge!"}catch(e){return e.message}}},194:function(e,t,n){e.exports=n(407)},401:function(e,t,n){},402:function(e,t,n){},407:function(e,t,n){"use strict";n.r(t);n(195),n(204);var r=n(0),o=n.n(r),s=n(189),a=n.n(s),i=(n(401),n(58)),c=n(47),m=n(190),l=n(91);function d(e){return{kind:"node",name:e,symbol:"component",size:1.2}}var u=function(){var e=d("Product API"),t=d("Stock API"),n=d("Product Service DB"),r=d("Product Importer"),s=d("Stock Importer"),a=d("Category Importer"),i=d("Campaign Importer"),c={kind:"stack",elements:[{kind:"layer",elements:[e,t]},{kind:"layer",elements:[n]},{kind:"layer",elements:[r,s,a,i]}]},m=[{from:e,to:n},{from:t,to:n},{from:n,to:r},{from:n,to:s},{from:n,to:a},{from:n,to:i}];return o.a.createElement(l.a,{stack:c,edges:m})};function f(e){throw new Error("Unexpected object: "+e)}function h(e){return{element:e,edges:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],syntheticNodes:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],syntheticEdges:arguments.length>3&&void 0!==arguments[3]?arguments[3]:[]}}function p(e,t){return t(e.element),e}function g(e,t){return t(e),e}function E(e){var t={kind:"node",visible:!0,shape:"rectangle"};return e?"string"===typeof e?Object.assign(t,{name:e}):Object.assign(t,e):t}function x(){return E({visible:!1})}function y(e){return E({name:e,symbol:"component"})}function v(e){return E({name:e,shape:"db-cylinder"})}function _(e){return E({name:e,shape:"queue-cylinder"})}function k(e){return E({name:e,shape:"deployment-box"})}function b(e,t){return{from:e,to:t}}function w(e){switch(e.kind){case"node":return[e];case"row":case"column":return e.elements.flatMap(w);default:f(e)}}function I(e){switch(e.kind){case"node":return[];case"row":case"column":return e.elements.flatMap(I).concat(e);default:f(e)}}function M(e){switch(e.kind){case"node":return[e];case"row":case"column":return e.elements.flatMap(M).concat(e);default:f(e)}}var S=n(52),O=n(4),P=5,C=5,j=150,A=60,D=15,B=40,T=15,Y=10,L=20,X=10,R=.5,W=1.5,K=.3*D,V=.4*D,N=.5*D,F=.4*D;function U(e){return C+e.offsetElementsX*(j+Y)+(e.borderIndexMaxX*(2*e.offsetElementsX+1)-e.borderIndexLeft)*D+e.crossLayerPathSegmentOffsetMaxX*e.offsetElementsX*X}function q(e){return P+e.offsetElementsY*(A+L)+(e.borderIndexMaxPreviousTop+e.borderIndexMaxTop-e.borderIndexTop)*B+e.borderIndexMaxPreviousBottom*T+e.midPathSegmentOffsetMaxPreviousY*X}var H=function(e){var t=e.symbol,n=e.symbolKey,r=e.width,s=e.x,a=e.y,i=1.2*r;switch(t){case"component":var c=.4*r,m=.15*r;return o.a.createElement("g",{key:n},o.a.createElement("path",{d:"M "+(s+c/2)+" "+(a+4*m)+" h "+-c/2+" v "+-m+" h "+c/2+" v "+-m+" h "+-c/2+" v "+-m+" h "+c/2+" v "+-m+" h "+.8*r+" v "+1.1*r+" h "+.8*-r+" Z",stroke:"black",strokeWidth:R,fill:"none"}),o.a.createElement("path",{d:"M "+(s+c/2)+" "+(a+4*m)+" h "+c/2+" v "+-m+" h "+-c/2,stroke:"black",strokeWidth:R,fill:"none"}),o.a.createElement("path",{d:"M "+(s+c/2)+" "+(a+2*m)+" h "+c/2+" v "+-m+" h "+-c/2,stroke:"black",strokeWidth:R,fill:"none"}));case"db-table":return o.a.createElement("g",{key:n},o.a.createElement("rect",{x:s,y:a,width:r,height:i,fill:"none",strokeWidth:R,stroke:"black"}),o.a.createElement("path",{d:"M "+s+" "+(a+.25*r)+" h "+r,stroke:"black",strokeWidth:R,fill:"none"}),o.a.createElement("path",{d:"M "+(s+.25*r)+" "+a+" v "+i,stroke:"black",strokeWidth:R,fill:"none"}));case"s3-bucket":var l=.1*i,d=.1*r;return o.a.createElement("g",{key:n},o.a.createElement("path",{d:"M "+s+" "+(a+l)+" A "+r/2+","+l+" 0 1,1 "+(s+r)+","+(a+l)+" L "+(s+r-d)+" "+(a+i-l)+" A "+(r/2-d)+","+l+" 0 1,1 "+(s+d)+","+(a+i-l)+" Z",stroke:"black",strokeWidth:R,fill:"white"}),o.a.createElement("path",{d:"M "+s+" "+(a+l)+" A "+r/2+","+l+" 0 1,0 "+(s+r)+","+(a+l),stroke:"black",strokeWidth:R,fill:"none"}));default:f(t)}};function G(e,t,n,r,s){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"white",i=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,m=i?W:R;return o.a.createElement(o.a.Fragment,null,"rectangle"===e&&o.a.createElement("rect",{x:t,y:n,width:r,height:s,onClick:c,fill:a,strokeWidth:m,stroke:"black"}),"db-cylinder"===e&&o.a.createElement("g",null,o.a.createElement("path",{d:"M "+t+" "+(n+N)+" A "+r/2+","+N+" 0 1,1 "+(t+r)+","+(n+N)+" V "+(n+s-N)+" A "+r/2+","+N+" 0 1,1 "+t+","+(n+s-N)+" Z",onClick:c,stroke:"black",strokeWidth:m,fill:"white"}),o.a.createElement("path",{d:"M "+t+" "+(n+N)+" A "+r/2+","+N+" 0 1,0 "+(t+r)+","+(n+N),stroke:"black",strokeWidth:m,fill:"none"})),"queue-cylinder"===e&&o.a.createElement("g",null,o.a.createElement("path",{d:"M "+(t+F)+" "+n+" A "+F+","+s/2+" 0 1,0 "+(t+F)+","+(n+s)+" H "+(t+r-F)+" A "+F+","+s/2+" 0 1,0 "+(t+r-F)+","+n+" Z",onClick:c,stroke:"black",strokeWidth:m,fill:"white"}),o.a.createElement("path",{d:"M "+(t+F)+" "+n+" A "+F+","+s/2+" 0 1,1 "+(t+F)+","+(n+s),stroke:"black",strokeWidth:m,fill:"none"})),"deployment-box"===e&&o.a.createElement("g",null,o.a.createElement("path",{d:"M "+(t+K)+" "+(n+K)+" L "+(t+K+V)+" "+n+" H "+(t+r-K+V)+" V "+(n+s-K)+" L "+(t+r-K)+" "+(n+s)+"H "+(t+K)+" Z",stroke:"black",strokeWidth:m,onClick:c,fill:a}),o.a.createElement("path",{d:"M "+(t+K)+" "+(n+K)+" H "+(t+r-K)+" V "+(n+s),stroke:"black",strokeWidth:m,fill:"none"}),o.a.createElement("path",{d:"M "+(t+r-K)+" "+(n+K)+" L "+(t+r-K+V)+" "+n,stroke:"black",strokeWidth:m,fill:"none"})))}var z=function(e){var t=e.node;if(!t.visible)return null;var n=U(t),r=q(t),s=n+5+("queue-cylinder"===t.shape?2*F:0)+("deployment-box"===t.shape?5:0),a=r+("deployment-box"===t.shape?5:0);return o.a.createElement("g",{key:t.elementKey},G(t.shape,n,r,j,A,"white",t.selected,(function(){return e.onNodeClick(t)})),t.name&&o.a.createElement("g",{transform:"translate("+s+" "+a+")"},o.a.createElement("text",{x:0,y:A*("db-cylinder"===t.shape?.3:0),fill:"black",clipPath:"url(#clip-element-text-"+t.elementKey+")",fontSize:12},t.name.split("\n").map((function(e,n){return o.a.createElement("tspan",{key:t.elementKey+"T"+n,x:"0",dy:"1.2em"},e)}))),o.a.createElement("clipPath",{id:"clip-element-text-"+t.elementKey},o.a.createElement("rect",{x:0,y:0,width:j-10-(t.symbol?19:0)-("queue-cylinder"===t.shape?2*F:0),height:A*("db-cylinder"===t.shape?.8:1)}))),t.symbol&&o.a.createElement(H,{symbol:t.symbol,symbolKey:t.elementKey+"CS",x:n+j-16-3,y:r+3,width:16}))};function Z(e){return p(e,J)}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{offsetElementsY:0};switch(e.kind){case"node":return Object.assign(e,{offsetElementsY:t.offsetElementsY}),void t.offsetElementsY++;case"row":Object.assign(e,{offsetElementsY:t.offsetElementsY});var n=0,r=t.offsetElementsY;return e.elements.forEach((function(e){J(e,t),n=Math.max(n,t.offsetElementsY),t.offsetElementsY=r})),void(t.offsetElementsY=n);case"column":return Object.assign(e,{offsetElementsY:t.offsetElementsY}),void e.elements.forEach((function(e){return J(e,t)}));default:f(e)}}function $(e){return p(e,Q)}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{offsetElementsX:0};switch(e.kind){case"node":return Object.assign(e,{offsetElementsX:t.offsetElementsX}),void t.offsetElementsX++;case"row":return Object.assign(e,{offsetElementsX:t.offsetElementsX}),void e.elements.forEach((function(e){return Q(e,t)}));case"column":Object.assign(e,{offsetElementsX:t.offsetElementsX});var n=0,r=t.offsetElementsX;return e.elements.forEach((function(e){Q(e,t),n=Math.max(n,t.offsetElementsX),t.offsetElementsX=r})),void(t.offsetElementsX=n);default:f(e)}}function ee(e){return p(e,te)}function te(e){switch(e.kind){case"node":return Object.assign(e,{embeddedElementsX:1}),1;case"row":var t=e.elements.map(te).reduce((function(e,t){return e+t}),0);return Object.assign(e,{embeddedElementsX:t}),t;case"column":var n=Math.max.apply(Math,Object(O.a)(e.elements.map(te)).concat([0]));return Object.assign(e,{embeddedElementsX:n}),n;default:f(e)}}var ne=function(e){var t=U(e),n=q(e),r=e.embeddedElementsX*j+(e.embeddedElementsX-1)*Y+((e.embeddedElementsX-1)*e.borderIndexMaxX*2+e.borderIndexLeft+e.borderIndexRight)*D+(e.embeddedElementsX-1)*e.crossLayerPathSegmentOffsetMaxX*X,s=e.embeddedElementsY*A+(e.embeddedElementsY-1)*L+e.borderIndexTop*B+e.embeddedBorderIndexMaxTop*B+e.embeddedBorderIndexMaxBottom*T+e.embeddedMidPathSegmentY*X+e.borderIndexBottom*T,a=t+D,i=n+5+("db-cylinder"===e.shape?N:0);return o.a.createElement("g",{key:e.elementKey},G(e.shape,t,n,r,s,"none"),e.name&&o.a.createElement("g",{transform:"translate("+a+" "+i+")"},o.a.createElement("text",{x:0,y:0,fill:"black",clipPath:"url(#clip-element-text-"+e.elementKey+")",fontSize:12},e.name.split("\n").map((function(t,n){return o.a.createElement("tspan",{key:e.elementKey+"T"+n,x:"0",dy:"1.2em"},t)}))),o.a.createElement("clipPath",{id:"clip-element-text-"+e.elementKey},o.a.createElement("rect",{x:0,y:0,width:r-2*D,height:B}))))};function re(e){return p(e,oe)}function oe(e){!function e(t,n){switch(t.kind){case"node":return void Object.assign(t,{borderIndexMaxX:n});case"row":case"column":return Object.assign(t,{borderIndexMaxX:n}),void t.elements.forEach((function(t){return e(t,n)}));default:f(t)}}(e,se(e))}function se(e){switch(e.kind){case"node":return 0;case"row":case"column":return Math.max.apply(Math,Object(O.a)(e.elements.map(se)).concat([e.borderIndexLeft,e.borderIndexRight]));default:f(e)}}function ae(e){return p(e,ie)}function ie(e){switch(e.kind){case"node":return Object.assign(e,{borderIndexLeft:0}),0;case"row":var t=(e.elements.length>0?e.elements.map(ie):[0])[0]+(e.shape?1:0);return Object.assign(e,{borderIndexLeft:t}),t;case"column":var n=Math.max.apply(Math,Object(O.a)(e.elements.map(ie)).concat([0]))+(e.shape?1:0);return Object.assign(e,{borderIndexLeft:n}),n;default:f(e)}}function ce(e){return p(e,me)}function me(e){switch(e.kind){case"node":return Object.assign(e,{borderIndexRight:0}),0;case"row":var t=e.elements.length>0?e.elements.map(me):[0],n=t[t.length-1]+(e.shape?1:0);return Object.assign(e,{borderIndexRight:n}),n;case"column":var r=Math.max.apply(Math,Object(O.a)(e.elements.map(me)).concat([0]))+(e.shape?1:0);return Object.assign(e,{borderIndexRight:r}),r;default:f(e)}}function le(e){return g(e,de)}function de(e){ue(e.element),e.syntheticNodes.forEach((function(e){return Object.assign(e,{borderIndexTop:0})}))}function ue(e){switch(e.kind){case"node":return Object.assign(e,{borderIndexTop:0}),0;case"row":var t=Math.max.apply(Math,Object(O.a)(e.elements.map(ue)).concat([0]))+(e.shape?1:0);return Object.assign(e,{borderIndexTop:t}),t;case"column":var n=(e.elements.length>0?e.elements.map(ue):[0])[0]+(e.shape?1:0);return Object.assign(e,{borderIndexTop:n}),n;default:f(e)}}function fe(e){return p(e,he)}function he(e){switch(e.kind){case"node":return Object.assign(e,{borderIndexBottom:0}),0;case"row":var t=Math.max.apply(Math,Object(O.a)(e.elements.map(he)).concat([0]))+(e.shape?1:0);return Object.assign(e,{borderIndexBottom:t}),t;case"column":var n=e.elements.length>0?e.elements.map(he):[0],r=n[n.length-1]+(e.shape?1:0);return Object.assign(e,{borderIndexBottom:r}),r;default:f(e)}}function pe(e){return function(t,n){return e(t)-e(n)}}function ge(e){return function(t,n){return e(n)-e(t)}}function Ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){for(var r=0;;){if(r===t.length)return 0;var o=t[r](e,n);if(0!==o)return o;r++}}}function xe(e){var t=new Map,n=0;return Array.from(e.entries()).sort(pe((function(e){return e[0]}))).forEach((function(e){t.set(e[0],n),n+=e[1]})),t}function ye(e){switch(e.kind){case"node":return e.offsetElementsY;case"row":case"column":return Math.max.apply(Math,Object(O.a)(e.elements.map(ye)).concat([e.offsetElementsY]));default:f(e)}}function ve(e){return g(e,_e)}function _e(e){var t=ke(e.element),n=xe(t);we(e.element,t,n),e.syntheticNodes.forEach((function(e){return we(e,t,n)}))}function ke(e){switch(e.kind){case"node":var t=new Map;return t.set(e.offsetElementsY,e.borderIndexBottom),t;case"row":case"column":var n=new Map;return n.set(ye(e),e.borderIndexBottom),e.elements.map(ke).reduce((function(e,t){return Array.from(t.entries()).forEach((function(t){var n=Math.max(e.get(t[0])||0,t[1]);e.set(t[0],n)})),e}),n);default:f(e)}}function be(e,t){for(var n=e.offsetElementsY,r=ye(e)-1,o=0,s=n;s<=r;s++)o+=t.get(s)||0;return o}function we(e,t,n){switch(e.kind){case"node":return void Object.assign(e,{borderIndexMaxBottom:t.get(e.offsetElementsY),borderIndexMaxPreviousBottom:n.get(e.offsetElementsY),embeddedBorderIndexMaxBottom:0});case"row":case"column":return Object.assign(e,{borderIndexMaxBottom:t.get(ye(e)),borderIndexMaxPreviousBottom:n.get(e.offsetElementsY),embeddedBorderIndexMaxBottom:be(e,t)}),void e.elements.forEach((function(e){return we(e,t,n)}));default:f(e)}}function Ie(e){return g(e,Me)}function Me(e){var t=Se(e.element),n=xe(t);Pe(e.element,t,n),e.syntheticNodes.forEach((function(e){return Pe(e,t,n)}))}function Se(e){switch(e.kind){case"node":var t=new Map;return t.set(e.offsetElementsY,e.borderIndexTop),t;case"row":case"column":var n=new Map;return n.set(e.offsetElementsY,e.borderIndexTop),e.elements.map(Se).reduce((function(e,t){return Array.from(t.entries()).forEach((function(t){var n=Object(S.a)(t,2),r=n[0],o=n[1],s=Math.max(e.get(r)||0,o);e.set(r,s)})),e}),n);default:f(e)}}function Oe(e,t){for(var n=e.offsetElementsY+1,r=ye(e),o=0,s=n;s<=r;s++)o+=t.get(s)||0;return o}function Pe(e,t,n){switch(e.kind){case"node":return void Object.assign(e,{borderIndexMaxTop:t.get(e.offsetElementsY),borderIndexMaxPreviousTop:n.get(e.offsetElementsY),embeddedBorderIndexMaxTop:0});case"row":case"column":return Object.assign(e,{borderIndexMaxTop:t.get(e.offsetElementsY),borderIndexMaxPreviousTop:n.get(e.offsetElementsY),embeddedBorderIndexMaxTop:Oe(e,t)}),void e.elements.forEach((function(e){return Pe(e,t,n)}));default:f(e)}}function Ce(e){return p(e,je)}function je(e){switch(e.kind){case"node":return Object.assign(e,{embeddedElementsY:1}),1;case"row":var t=Math.max.apply(Math,Object(O.a)(e.elements.map(je)).concat([0]));return Object.assign(e,{embeddedElementsY:t}),t;case"column":var n=e.elements.map(je).reduce((function(e,t){return e+t}),0);return Object.assign(e,{embeddedElementsY:n}),n;default:f(e)}}function Ae(e){return e.from.offsetElementsY===e.to.offsetElementsY?e.from.offsetElementsX<=e.to.offsetElementsX:e.from.offsetElementsY<e.to.offsetElementsY}function De(e){return Ae(e)?e.from:e.to}function Be(e){return Ae(e)?e.to:e.from}function Te(e){return function(e){return e.from.offsetElementsX===e.to.offsetElementsX?e.from.offsetElementsY<=e.to.offsetElementsY:e.from.offsetElementsX<e.to.offsetElementsX}(e)?e.from:e.to}function Ye(e,t,n){var r=e.offsetElementsY<=n.offsetElementsY,o=(j-(((r?e.lowerSideEdges:e.upperSideEdges)||0)-1)*X)/2;return{x:U(e)+o+t*X,y:q(e)+(r?A:0)}}var Le=function(e){var t=Ye(e.from,e.fromIndex,e.to),n=q(De(e))+A+De(e).borderIndexMaxBottom*T+L/2+e.midPathSegmentOffsetY*X,r=Ye(e.to,e.toIndex,e.from),s=e.selected?W:R,a=e.to.offsetElementsY<=e.from.offsetElementsY,i=o.a.createElement("path",{d:"M "+(r.x+3)+" "+(r.y+5*(a?1:-1))+" L "+r.x+" "+r.y+" L "+(r.x-3)+" "+(r.y+5*(a?1:-1)),stroke:"black",strokeWidth:s,fill:"none"});if(e.lowerLayerEdge){var c=e.lowerLayerEdge,m=q(De(e.lowerLayerEdge))+A+De(e.lowerLayerEdge).borderIndexMaxBottom*T+L/2+c.midPathSegmentOffsetY*X,l=U(Te(e))+j+De(e).borderIndexMaxX*D+(e.crossLayerPathSegmentOffsetX+1)*X;return o.a.createElement("g",{key:e.edgeIndex},o.a.createElement("path",{d:"M "+t.x+" "+t.y+" V "+n+" H "+l+" V "+m+" H "+r.x+" V "+r.y,stroke:"black",strokeWidth:s,fill:"none"}),i)}return o.a.createElement("g",{key:e.edgeIndex},o.a.createElement("path",{d:"M "+t.x+" "+t.y+" V "+n+" H "+r.x+" V "+r.y,stroke:"black",strokeWidth:s,fill:"none"}),i)};function Xe(e){!function(e){var t=new Map;function n(e,n,r,o){var s=n.offsetElementsY<=r.offsetElementsY?"LOWER":"UPPER",a=n.elementKey+s,i=t.get(a)||{node:n,side:s,edgeEnds:[]};i.edgeEnds.push({edge:e,reverseNode:r,setIndex:o}),t.set(a,i)}e.forEach((function(e){n(e,e.from,e.to,(function(t){return Object.assign(e,{fromIndex:t})})),n(e,e.to,e.from,(function(t){return Object.assign(e,{toIndex:t})}))})),Array.from(t.values()).forEach((function(e){var t=e.edgeEnds,n=e.node,r=e.side,o=t.filter((function(e){return e.reverseNode.offsetElementsY===n.offsetElementsY})),s=o.filter((function(e){return e.reverseNode.offsetElementsX<=n.offsetElementsX})),a=o.filter((function(e){return e.reverseNode.offsetElementsX>n.offsetElementsX})),i=t.filter((function(e){return e.reverseNode.offsetElementsY!==n.offsetElementsY})),c=i.filter((function(e){return e.reverseNode.offsetElementsX<=n.offsetElementsX})),m=i.filter((function(e){return e.reverseNode.offsetElementsX>n.offsetElementsX}));s.sort(Ee(ge((function(e){return e.reverseNode.offsetElementsX})),ge((function(e){return e.edge.edgeIndex})))),c.sort(Ee(pe((function(e){return e.reverseNode.offsetElementsX})),ge((function(e){return e.reverseNode.offsetElementsY})))),m.sort(Ee(pe((function(e){return e.reverseNode.offsetElementsX})),pe((function(e){return e.reverseNode.offsetElementsY})))),a.sort(Ee(ge((function(e){return e.reverseNode.offsetElementsX})),pe((function(e){return e.edge.edgeIndex})))),s.concat(c).concat(m).concat(a).forEach((function(e,t){e.setIndex(t)})),"UPPER"===r?Object.assign(n,{upperSideEdges:t.length}):Object.assign(n,{lowerSideEdges:t.length})}))}(e.edges);var t=e.edges;return t.forEach((function(e){e.lowerLayerEdge&&Object.assign(e.lowerLayerEdge,{fromIndex:0,toIndex:We(e)})})),e}function Re(e){return Ae(e)?e.fromIndex:e.toIndex}function We(e){return Ae(e)?e.toIndex:e.fromIndex}function Ke(e){return Math.abs(e.from.offsetElementsY-e.to.offsetElementsY)>=2}function Ve(e){var t=Math.max.apply(Math,Object(O.a)(M(e.element).map((function(e){return e.elementKey})))),n=new Map;w(e.element).filter((function(e){return e.visible})).forEach((function(e){return n.set(e.offsetElementsX+"_"+e.offsetElementsY,!0)}));var r=[],o=e.edges.filter(Ke).filter((function(e){for(var t=Be(e),r=De(e),o=Math.min(r.offsetElementsX,t.offsetElementsX),s=r.offsetElementsY+1;s<=t.offsetElementsY-1;s++)if(n.has(o+"_"+s))return!0;return!1})).map((function(e){var n=Be(e),o=De(e);t++;var s=Object.assign(E(),{elementKey:t,offsetElementsY:n.offsetElementsY-1,offsetElementsX:Math.min(o.offsetElementsX,n.offsetElementsX)});r.push(s);var a={lowerLayerEdge:{from:s,to:n,isLowerLayerEdge:!0,originalEdge:e}};return Object.assign(e,a),a.lowerLayerEdge}));return Object.assign(e,{syntheticNodes:r,syntheticEdges:o})}function Ne(e){return function(e){var t=new Map;e.forEach((function(e){var n=De(e).offsetElementsY,r=t.get(n)||[];r.push(e),t.set(n,r)})),Array.from(t.values()).forEach(Fe)}(e.edges.concat(e.syntheticEdges)),e}function Fe(e){var t=new Map;e.forEach((function(e){var n=De(e),r=n.offsetElementsY+"_"+n.offsetElementsX,o=t.get(r)||[];o.push(e),t.set(r,o)}));var n=Array.from(t.keys());n.sort();var r=0;n.forEach((function(e){var n=t.get(e),o=n.filter((function(e){return Be(e).offsetElementsY===De(e).offsetElementsY})),s=o.filter((function(e){return Be(e).offsetElementsX<=De(e).offsetElementsX})),a=o.filter((function(e){return Be(e).offsetElementsX>De(e).offsetElementsX})),i=n.filter((function(e){return Be(e).offsetElementsY!==De(e).offsetElementsY})),c=i.filter((function(e){return Be(e).offsetElementsX===De(e).offsetElementsX?!Ke(e)&&(!e.isLowerLayerEdge&&We(e)-((Be(e).upperSideEdges||1)-1)/2<Re(e)-((De(e).lowerSideEdges||1)-1)/2):Be(e).offsetElementsX<=De(e).offsetElementsX})),m=i.filter((function(e){return Be(e).offsetElementsX===De(e).offsetElementsX?!!Ke(e)||(!!e.isLowerLayerEdge||We(e)-((Be(e).upperSideEdges||1)-1)/2>=Re(e)-((De(e).lowerSideEdges||1)-1)/2):Be(e).offsetElementsX>De(e).offsetElementsX}));s.sort(Ee(pe((function(e){return Be(e).offsetElementsX})),ge((function(e){return e.edgeIndex})))),c.sort(Ee(pe((function(e){return Be(e).offsetElementsX})),pe((function(e){return e.edgeIndex})))),m.sort(Ee(ge((function(e){return Be(e).offsetElementsX})),pe((function(e){return e.isLowerLayerEdge?De(e.originalEdge).offsetElementsX:0})),pe((function(e){return e.isLowerLayerEdge?e.originalEdge.edgeIndex:0})),ge((function(e){return e.edgeIndex})))),a.sort(Ee(pe((function(e){return Be(e).offsetElementsX})),ge((function(e){return e.edgeIndex}))));var l=s.concat(c),d=a.concat(m);function u(e,t,n){var o=r+t;Object.assign(e,{midPathSegmentOffsetY:o})}l.forEach((function(e,t){return u(e,t)})),d.forEach((function(e,t){return u(e,t)})),r+=Math.max(l.length,d.length)}))}function Ue(e){return p(e,qe)}function qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{elementKey:0};switch(e.kind){case"node":return Object.assign(e,{elementKey:t.elementKey}),void t.elementKey++;case"row":case"column":return Object.assign(e,{elementKey:t.elementKey}),t.elementKey++,void e.elements.forEach((function(e){return qe(e,t)}));default:f(e)}}function He(e){return g(e,Ge)}function Ge(e){var t=ye(e.element),n=function(e){var t=new Map;return e.forEach((function(e){var n=De(e).offsetElementsY,r=t.get(n)||0;t.set(n,Math.max(r,e.midPathSegmentOffsetY))})),t}(e.edges.concat(e.syntheticEdges)),r=function(e,t){var n=new Map,r=0;return Array.from(Array(t+1).keys()).forEach((function(t){n.set(t,r),r+=e.get(t)||0})),n}(n,t);Ze(e.element,n,r),e.syntheticNodes.forEach((function(e){return Ze(e,n,r)}))}function ze(e,t){for(var n=e.offsetElementsY,r=ye(e)-1,o=0,s=n;s<=r;s++)o+=t.get(s)||0;return o}function Ze(e,t,n){switch(e.kind){case"node":return void Object.assign(e,{midPathSegmentOffsetMaxY:t.get(e.offsetElementsY)||0,midPathSegmentOffsetMaxPreviousY:n.get(e.offsetElementsY)||0,embeddedMidPathSegmentY:0});case"row":case"column":return Object.assign(e,{midPathSegmentOffsetMaxY:t.get(e.offsetElementsY)||0,midPathSegmentOffsetMaxPreviousY:n.get(e.offsetElementsY)||0,embeddedMidPathSegmentY:ze(e,t)}),void e.elements.forEach((function(e){return Ze(e,t,n)}));default:f(e)}}function Je(e){return e.edges.concat(e.syntheticEdges).forEach((function(e,t){Object.assign(e,{edgeIndex:t})})),e}function $e(e){return function(e){var t=new Map;e.filter((function(e){return e.lowerLayerEdge})).forEach((function(e){var n=Te(e).offsetElementsX,r=t.get(n)||[];r.push(e),t.set(n,r)})),Array.from(t.values()).forEach(Qe)}(e.edges),e}function Qe(e){var t=new Map;e.forEach((function(e){var n=Te(e),r=n.offsetElementsY+"_"+n.offsetElementsX,o=t.get(r)||[];o.push(e),t.set(r,o)}));var n=Array.from(t.keys());n.sort();var r=0;n.forEach((function(e){var n=t.get(e);n.sort(Ee(pe((function(e){return Be(e).offsetElementsX})),pe((function(e){return e.edgeIndex})))),n.forEach((function(e,t){return function(e,t){var n=r+t;Object.assign(e,{crossLayerPathSegmentOffsetX:n})}(e,t)})),r+=n.length}))}function et(e){return g(e,tt)}function tt(e){var t,n=(t=e.edges,Math.max.apply(Math,Object(O.a)(t.map((function(e){return(e.crossLayerPathSegmentOffsetX||0)+1}))).concat([0])));!function e(t,n){switch(t.kind){case"node":return void Object.assign(t,{crossLayerPathSegmentOffsetMaxX:n});case"row":case"column":return Object.assign(t,{crossLayerPathSegmentOffsetMaxX:n}),void t.elements.forEach((function(t){return e(t,n)}));default:f(t)}}(e.element,n)}function nt(e){switch(e.kind){case"node":return 2*C+e.offsetElementsX*Y+(e.offsetElementsX+1)*j+e.borderIndexMaxX*(e.offsetElementsX+1)*2*D+e.crossLayerPathSegmentOffsetMaxX*(e.offsetElementsX+1)*X;case"row":case"column":return Math.max.apply(Math,Object(O.a)(e.elements.map(nt)).concat([0]));default:f(e)}}function rt(e){switch(e.kind){case"node":return 2*P+(e.offsetElementsY+1)*L+(e.offsetElementsY+1)*A+(e.borderIndexMaxPreviousTop+e.borderIndexMaxTop)*B+(e.borderIndexMaxPreviousBottom+e.borderIndexMaxBottom)*T+(e.midPathSegmentOffsetMaxPreviousY+e.midPathSegmentOffsetMaxY)*X;case"row":case"column":return Math.max.apply(Math,Object(O.a)(e.elements.map(rt)).concat([0]));default:f(e)}}var ot=function(e){var t=Object(r.useState)(e.initialGraph),n=Object(S.a)(t,2),s=n[0],a=n[1];function i(e){var t;t=!e.selected,e.selected=t,a((function(n){return n.edges.filter((function(t){return t.from===e||t.to===e})).forEach((function(e){return e.selected=t})),h(n.element,n.edges,n.syntheticNodes,n.syntheticEdges)}))}return[s].map(Ue).map($).map(Z).map(Ve).map(ae).map(ce).map(le).map(fe).map(re).map(Ie).map(ve).map(ee).map(Ce).map(Je).map(Xe).map(Ne).map(He).map($e).map(et).map((function(e){return o.a.createElement("svg",{viewBox:"0 0 "+nt(e.element)+" "+rt(e.element)},I(e.element).filter((function(e){return e.shape})).map(ne),w(e.element).map((function(e){return o.a.createElement(z,{key:e.elementKey+"O",node:e,onNodeClick:i})})),e.edges.map(Le))}))[0]},st=function(){var e=E("Some node"),t=E(),n=E(),r=E({name:"Component node",symbol:"component"}),s=E({name:"Another component node",symbol:"component"}),a=E(),i=E("Some node with long text"),c=E(),m=E(),l=E(),d=E(),u=E(),f=E(),p=E(),g=E(),y=E(),v=E(),_=E({visible:!1}),k=E(),w=E(),I=E(),M={kind:"column",elements:[{kind:"row",name:"Top row",shape:"rectangle",elements:[{kind:"column",name:"Left column",shape:"rectangle",elements:[e,t]},{kind:"column",name:"Right column",shape:"rectangle",elements:[{kind:"row",name:"Nested row",shape:"rectangle",elements:[n,r]},s,a]},_,{kind:"column",elements:[w,x(),I]},k]},{kind:"row",elements:[i,c,m,l,d]},{kind:"row",name:"Bottom row",shape:"rectangle",elements:[{kind:"row",name:"Left row in row",shape:"rectangle",elements:[u,f]},{kind:"row",name:"Right row in row",shape:"rectangle",elements:[p,g,y,v]}]}]},S=[b(e,i),b(e,t),b(n,e),b(n,e),b(n,r),b(n,r),b(n,i),b(n,i),b(n,m),b(n,m),b(n,l),b(r,l),b(r,c),b(r,v),b(a,i),b(a,i),b(a,m),b(a,l),b(a,d),b(a,d),b(i,c),b(u,c),b(f,c),b(p,c),b(g,c),b(y,c),b(y,c),b(v,c),b(u,d),b(f,d),b(p,d),b(g,d),b(y,d),b(v,d),b(v,y),b(v,y),b(k,v),b(w,I)];return o.a.createElement(ot,{initialGraph:h(M,S)})},at=n(12);function it(){var e=new function e(){Object(at.a)(this,e),this.customerBrowser=new function e(){Object(at.a)(this,e),this.contentViewComponent=y("Content View HTML"),this.searchViewComponent=y("Search View HTML"),this.pdpViewComponent=y("PDP View HTML"),this.element={kind:"row",name:"Customer Browser",shape:"deployment-box",elements:[x(),this.contentViewComponent,x(),x(),x(),this.searchViewComponent,x(),x(),x(),x(),this.pdpViewComponent,x(),x(),x()]}},this.coreAccount=new function e(){Object(at.a)(this,e),this.edutainment=new function e(){Object(at.a)(this,e),this.contentView=new function e(){Object(at.a)(this,e),this.siteMap=y("Content Site Map"),this.component=y("Content View"),this.element={kind:"row",name:"Content View",shape:"deployment-box",elements:[this.siteMap,this.component]}},this.element={kind:"column",elements:[this.contentView.element]}},this.core=new function e(){Object(at.a)(this,e),this.pdpView=new function e(){Object(at.a)(this,e),this.searchViewComponent=y("Search View"),this.pdpViewComponent=y("PDP View"),this.element={kind:"row",elements:[x(),x(),{kind:"row",name:"PDP View",shape:"deployment-box",elements:[x(),this.searchViewComponent,x(),x(),x(),x(),this.pdpViewComponent,x(),x(),x()]}]}},this.services=new function e(){Object(at.a)(this,e),this.coreSiteMap=new function e(){Object(at.a)(this,e),this.siteMapGenerator=y("Site Map Generator"),this.element={kind:"column",elements:[x(),{kind:"row",name:"Site Map Generator",shape:"deployment-box",elements:[this.siteMapGenerator]}]}},this.search=new function e(){Object(at.a)(this,e),this.factFinderDB=v("FACTFinder DB"),this.factFinderAPI=y("FACTFinder API"),this.factFinderFeedServiceDB=v("FACTFinder Feed\nService DB"),this.factFinderUpdater=y("FACTFinder Updater"),this.ffProductImporter=y("Product Importer"),this.ffProductCampaignsImporter=y("Product Campaigns\nImporter"),this.ffCategoryImporter=y("Category Importer"),this.element={kind:"column",elements:[{kind:"row",elements:[this.factFinderDB,{kind:"row",name:"FACT Finder",shape:"deployment-box",elements:[x(),this.factFinderAPI,x()]}]},{kind:"row",elements:[this.factFinderFeedServiceDB,{kind:"column",name:"FACT Finder Feed Service",shape:"deployment-box",elements:[{kind:"row",elements:[x(),this.factFinderUpdater]},{kind:"row",elements:[this.ffProductImporter,this.ffProductCampaignsImporter,this.ffCategoryImporter]}]}]}]},this.edges=[b(this.factFinderAPI,this.factFinderDB),b(this.factFinderUpdater,this.factFinderAPI),b(this.factFinderUpdater,this.factFinderFeedServiceDB),b(this.ffProductImporter,this.factFinderFeedServiceDB),b(this.ffProductCampaignsImporter,this.factFinderFeedServiceDB),b(this.ffCategoryImporter,this.factFinderFeedServiceDB)]},this.productService=new function e(){Object(at.a)(this,e),this.productServiceDB=v("Product Service DB"),this.productAPI=y("Product API"),this.stockAPI=y("Stock API"),this.productImporter=y("Product Importer"),this.productCampaignsImporter=y("Product Campaigns\nImporter"),this.nightlyStockImporter=y("Nightly Stock Importer"),this.nearTimeStockImporter=y("Near Time Stock\nImporter"),this.deliveryTimeImporter=y("Delivery Time Importer"),this.categoryImporter=y("Category Importer"),this.element={kind:"row",elements:[{kind:"column",elements:[x(),this.productServiceDB]},{kind:"column",name:"Product Service",shape:"deployment-box",elements:[{kind:"row",elements:[x(),x(),this.productAPI,this.stockAPI]},x(),{kind:"row",elements:[this.productImporter,this.productCampaignsImporter,this.nightlyStockImporter,this.nearTimeStockImporter,this.deliveryTimeImporter,this.categoryImporter]}]}]},this.edges=[b(this.productAPI,this.productServiceDB),b(this.stockAPI,this.productServiceDB),b(this.productImporter,this.productServiceDB),b(this.productCampaignsImporter,this.productServiceDB),b(this.nightlyStockImporter,this.productServiceDB),b(this.nearTimeStockImporter,this.productServiceDB),b(this.deliveryTimeImporter,this.productServiceDB),b(this.categoryImporter,this.productServiceDB)]},this.element={kind:"row",elements:[this.coreSiteMap.element,this.search.element,this.productService.element]},this.edges=this.search.edges.concat(this.productService.edges)},this.exporter=new function e(){Object(at.a)(this,e),this.productExporterService=new function e(){Object(at.a)(this,e),this.productStream=_("Product Stream"),this.productExporter=y("Product Exporter"),this.productCampaignsStream=_("Product Campaigns\nStream"),this.productCampaignsExporter=y("Product Campaigns\nExporter"),this.nightlyStockStream=_("Nightly Stock Stream"),this.nightlyStockExporter=y("Nightly Stock Exporter"),this.element={kind:"column",elements:[{kind:"row",elements:[this.productStream,this.productCampaignsStream,this.nightlyStockStream]},{kind:"row",name:"Product Exporter Service",shape:"deployment-box",elements:[this.productExporter,this.productCampaignsExporter,this.nightlyStockExporter]}]},this.edges=[b(this.productExporter,this.productStream),b(this.productCampaignsExporter,this.productCampaignsStream),b(this.nightlyStockExporter,this.nightlyStockStream)]},this.stockExporterService=new function e(){Object(at.a)(this,e),this.stockStream=_("Stock Stream"),this.stockExporter=y("Stock Exporter"),this.element={kind:"column",elements:[this.stockStream,{kind:"row",name:"Stock Exporter Service",shape:"deployment-box",elements:[this.stockExporter]}]},this.edges=[b(this.stockExporter,this.stockStream)]},this.deliveryTimeExporterService=new function e(){Object(at.a)(this,e),this.deliveryTimeStream=_("Delivery Time Stream"),this.deliveryTimeExporter=y("Delivery Time Exporter"),this.element={kind:"column",elements:[this.deliveryTimeStream,{kind:"row",name:"Delivery Time\nExporter Service",shape:"deployment-box",elements:[this.deliveryTimeExporter]}]},this.edges=[b(this.deliveryTimeExporter,this.deliveryTimeStream)]},this.categoryExporterService=new function e(){Object(at.a)(this,e),this.categoryStream=_("Category Stream"),this.categoryExporter=y("Category Exporter"),this.articleS3Bucket=E({name:"Article S3 Bucket",symbol:"s3-bucket"}),this.element={kind:"column",elements:[this.categoryStream,{kind:"row",name:"Category Exporter Service",shape:"deployment-box",elements:[this.categoryExporter]},this.articleS3Bucket]},this.edges=[b(this.categoryExporter,this.categoryStream),b(this.categoryExporter,this.articleS3Bucket)]},this.element={kind:"row",elements:[x(),x(),x(),x(),x(),x(),this.productExporterService.element,this.stockExporterService.element,this.deliveryTimeExporterService.element,this.categoryExporterService.element]},this.edges=this.productExporterService.edges.concat(this.stockExporterService.edges).concat(this.deliveryTimeExporterService.edges).concat(this.categoryExporterService.edges)},this.element={kind:"column",elements:[this.pdpView.element,this.services.element,this.exporter.element]},this.edges=this.services.edges.concat(this.exporter.edges).concat([b(this.pdpView.pdpViewComponent,this.services.productService.productAPI),b(this.pdpView.pdpViewComponent,this.services.productService.stockAPI),b(this.pdpView.searchViewComponent,this.services.search.factFinderAPI),b(this.services.coreSiteMap.siteMapGenerator,this.services.search.factFinderFeedServiceDB),b(this.services.search.ffProductImporter,this.exporter.productExporterService.productStream),b(this.services.search.ffProductCampaignsImporter,this.exporter.productExporterService.productCampaignsStream),b(this.services.search.ffCategoryImporter,this.exporter.categoryExporterService.categoryStream),b(this.services.productService.productImporter,this.exporter.productExporterService.productStream),b(this.services.productService.productCampaignsImporter,this.exporter.productExporterService.productCampaignsStream),b(this.services.productService.nightlyStockImporter,this.exporter.productExporterService.nightlyStockStream),b(this.services.productService.nearTimeStockImporter,this.exporter.stockExporterService.stockStream),b(this.services.productService.deliveryTimeImporter,this.exporter.deliveryTimeExporterService.deliveryTimeStream),b(this.services.productService.categoryImporter,this.exporter.categoryExporterService.categoryStream)])},this.element={kind:"row",shape:"rectangle",name:"Core VPC",elements:[this.edutainment.element,this.core.element]},this.edges=this.core.edges.concat([b(this.edutainment.contentView.component,this.core.services.search.factFinderAPI),b(this.edutainment.contentView.component,this.core.services.productService.productAPI)])},this.backendSystems=new function e(){Object(at.a)(this,e),this.contentful=new function e(){Object(at.a)(this,e),this.content=E("Site Content"),this.catalogContent=E("Catalog specific Content"),this.productContent=E("Product specific Content"),this.element={kind:"row",name:"Contentful",shape:"deployment-box",elements:[this.content,this.catalogContent,this.productContent]}},this.tds=new function e(){Object(at.a)(this,e),this.shopNowDB=new function e(){Object(at.a)(this,e),this.mediaData=E({name:"Media Data",symbol:"db-table"}),this.element={kind:"row",name:"ShopNow DB",shape:"db-cylinder",elements:[this.mediaData]}},this.mediathek=new function e(){Object(at.a)(this,e),this.element=k("Mediathek")},this.mercator=new function e(){Object(at.a)(this,e),this.mercatorStagingDB=v("Mercator Staging DB"),this.mercatorDB=v("Mercator DB"),this.mercatorComponent=k("Mercator"),this.element={kind:"column",elements:[{kind:"row",elements:[this.mercatorStagingDB,this.mercatorDB]},{kind:"row",elements:[x(),this.mercatorComponent]}]},this.edges=[b(this.mercatorComponent,this.mercatorDB),b(this.mercatorDB,this.mercatorStagingDB)]},this.sapERP=new function e(){Object(at.a)(this,e),this.articleReport=y("Article Report"),this.element={kind:"column",name:"SAP ERP / Retail",shape:"deployment-box",elements:[this.articleReport]}},this.sapCRM=new function e(){Object(at.a)(this,e),this.sellAPI=y("SELL API"),this.element={kind:"column",name:"SAP CRM",shape:"deployment-box",elements:[this.sellAPI]}},this.element={kind:"row",shape:"rectangle",name:"TDS",elements:[{kind:"column",elements:[this.shopNowDB.element,this.mediathek.element]},this.mercator.element,x(),x(),this.sapERP.element,this.sapCRM.element]},this.edges=this.mercator.edges.concat([b(this.mediathek.element,this.shopNowDB.mediaData)])},this.element={kind:"row",elements:[this.contentful.element,x(),x(),x(),x(),x(),this.tds.element]}},this.element={kind:"column",elements:[this.customerBrowser.element,this.coreAccount.element,this.backendSystems.element]},this.edges=this.coreAccount.edges.concat(this.backendSystems.tds.edges).concat([b(this.coreAccount.edutainment.contentView.component,this.customerBrowser.contentViewComponent),b(this.coreAccount.core.pdpView.searchViewComponent,this.customerBrowser.searchViewComponent),b(this.coreAccount.core.pdpView.pdpViewComponent,this.customerBrowser.pdpViewComponent),b(this.coreAccount.edutainment.contentView.component,this.backendSystems.contentful.content),b(this.coreAccount.core.pdpView.searchViewComponent,this.backendSystems.contentful.catalogContent),b(this.coreAccount.core.pdpView.pdpViewComponent,this.backendSystems.contentful.productContent),b(this.coreAccount.core.exporter.productExporterService.productExporter,this.backendSystems.tds.shopNowDB.mediaData),b(this.coreAccount.core.exporter.productExporterService.productExporter,this.backendSystems.tds.mercator.mercatorStagingDB),b(this.coreAccount.core.exporter.productExporterService.productCampaignsExporter,this.backendSystems.tds.mercator.mercatorStagingDB),b(this.coreAccount.core.exporter.productExporterService.nightlyStockExporter,this.backendSystems.tds.mercator.mercatorStagingDB),b(this.backendSystems.tds.sapERP.articleReport,this.coreAccount.core.exporter.categoryExporterService.articleS3Bucket),b(this.coreAccount.core.exporter.stockExporterService.stockExporter,this.backendSystems.tds.sapCRM.sellAPI),b(this.coreAccount.core.exporter.deliveryTimeExporterService.deliveryTimeExporter,this.backendSystems.tds.sapCRM.sellAPI)])};return h(e.element,e.edges)}var ct=function(){return o.a.createElement(ot,{initialGraph:it()})},mt=function(){return o.a.createElement(i.a,null,o.a.createElement("div",null,o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(i.b,{to:"/"},"Editor")),o.a.createElement("li",null,o.a.createElement(i.b,{to:"/architecture"},"Sample Architecture")),o.a.createElement("li",null,o.a.createElement(i.b,{to:"/new-layouting"},"New Layouting")),o.a.createElement("li",null,o.a.createElement(i.b,{to:"/new-architecture"},"New Sample Architecture"))),o.a.createElement("hr",null),o.a.createElement(c.c,null,o.a.createElement(c.a,{exact:!0,path:"/"},o.a.createElement(m.a,null)),o.a.createElement(c.a,{path:"/architecture"},o.a.createElement(u,null)),o.a.createElement(c.a,{path:"/new-layouting"},o.a.createElement(st,null)),o.a.createElement(c.a,{path:"/new-architecture"},o.a.createElement(ct,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(mt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},89:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++)if(void 0===t[n])throw new Error("Empty array elements are not allowed.");var r=e;return t.forEach((function(e){if(void 0===r.elements[e])throw new Error("Indices must refer to a node that does exist. Index "+e+" Array length "+r.elements.length);r=r.elements[e]})),r}function o(e,t){return t.map((function(t){return function(e,t){return{from:r(e,t.from),to:r(e,t.to)}}(e,t)}))}n.d(t,"a",(function(){return o}))},90:function(e,t,n){"use strict";function r(e){if("string"===typeof e)return{kind:"node",name:e};if(!("elements"in e))return Object.assign(e,{kind:"node"});for(var t=0;t<e.elements.length;t++)if(void 0===e.elements[t])throw new Error("Empty array elements are not allowed.");if("name"in e)return{kind:"group",name:e.name,elements:e.elements.map(r)};switch(e.kind){default:case"stack":case"layer":return{kind:e.kind,elements:e.elements.map(r)}}}function o(e){return{kind:"stack",elements:e.map((function(e){return{kind:"layer",elements:e.map(r)}}))}}n.d(t,"a",(function(){return o}))},91:function(e,t,n){"use strict";var r=n(0),o=n.n(r),s=n(4),a=5,i=5,c=150,m=40,l=30,d=10,u=10,f=10,h=20,p=10;function g(e){switch(e.kind){case"stack":return Math.max.apply(Math,Object(s.a)(e.elements.map(g)));case"layer":return e.elements.map(g).map((function(e,t){return e+(t>0?f:0)})).reduce((function(e,t){return e+t}),0);case"group":return e.elements.map(g).map((function(e,t){return e+(t>0?f:0)})).reduce((function(e,t){return e+t}),0)+2*u;case"node":return c*(e.size||1)}}function E(e){return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(t.kind){case"stack":var o=g(t);return t.elements.forEach((function(t){e(t,n,o)})),void(n.x+=o+f);case"layer":var s=n.x;return n.x=s+(r-g(t))/2,t.elements.forEach((function(t){e(t,n,r)})),void(n.x=s);case"group":return Object.assign(t,{x:n.x}),n.x+=u,t.elements.forEach((function(t){e(t,n,r)})),void(n.x+=u);case"node":return Object.assign(t,{x:n.x}),void(n.x+=c*(t.size||1)+f)}}(e.stack,{x:i}),e}function x(e){return function(t,n){return e(t)-e(n)}}function y(e){return function(t,n){return e(n)-e(t)}}function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){for(var r=0;;){if(r===t.length)return 0;var o=t[r](e,n);if(0!==o)return o;r++}}}function _(e){return e.from.layerIndex===e.to.layerIndex?e.from.x<=e.to.x:e.from.layerIndex<e.to.layerIndex}function k(e){return _(e)?e.from:e.to}function b(e){return _(e)?e.to:e.from}function w(e){return function(e){var t=new Map;e.map((function(e,t){return Object.assign(e,{edgeIndex:t})})).forEach((function(e){var n=k(e).layerIndex,r=t.get(n)||[];r.push(e),t.set(n,r)})),Array.from(t.values()).forEach(I)}(e.edges),e}function I(e){var t=new Map;e.forEach((function(e){var n=k(e).key,r=t.get(n)||[];r.push(e),t.set(n,r)}));var n=Array.from(t.keys());n.sort();var r=0;n.forEach((function(e){var n=t.get(e),o=n.filter((function(e){return b(e).layerIndex===k(e).layerIndex})),s=o.filter((function(e){return b(e).x<=k(e).x})),a=o.filter((function(e){return b(e).x>k(e).x})),i=n.filter((function(e){return b(e).layerIndex!==k(e).layerIndex})),c=i.filter((function(e){return b(e).x<=k(e).x})),m=i.filter((function(e){return b(e).x>k(e).x}));s.sort(v(x((function(e){return b(e).x})),x((function(e){return e.edgeIndex})))),c.sort(v(x((function(e){return b(e).x})),x((function(e){return e.edgeIndex})))),m.sort(v(y((function(e){return b(e).x})),y((function(e){return e.edgeIndex})))),a.sort(v(x((function(e){return b(e).x})),x((function(e){return e.edgeIndex}))));var l=s.concat(c),d=a.concat(m);function u(t,n,o){var s=k(t).layerIndex,a=r+n;Object.assign(t,{key:e+"_"+o+"_"+a,index:a,layerIndex:s})}l.forEach((function(e,t){return u(e,t,"B")})),d.forEach((function(e,t){return u(e,t,"A")})),r+=Math.max(l.length,d.length)}))}function M(e,t){var n=new Map;return e.forEach((function(e){var t=k(e).layerIndex,r=n.get(t)||[];r.push(e),n.set(t,r)})),Array.from(Array(t).keys()).map((function(e){var t,r=(null===(t=n.get(e))||void 0===t?void 0:t.map((function(e){return e.index})))||[0];return Math.max.apply(Math,Object(s.a)(r))*p}))}function S(e){switch(e.kind){case"stack":return e.elements.map(S).map((function(e,t){return e+(t>0?h:0)})).reduce((function(e,t){return e+t}),0);case"layer":return Math.max.apply(Math,Object(s.a)(e.elements.map(S)));case"group":return l+Math.max.apply(Math,Object(s.a)(e.elements.map(S)))+d;case"node":return e.isPlaceholder?0:m}}function O(e){switch(e.kind){case"stack":return 0===e.elements.length?0:O(e.elements[0]);case"layer":return Math.max.apply(Math,Object(s.a)(e.elements.map(O)));case"group":return l+Math.max.apply(Math,Object(s.a)(e.elements.map(O)))+d;case"node":return e.isPlaceholder?0:m}}function P(e){switch(e.kind){case"stack":return 0===e.elements.length?0:P(e.elements[0]);case"layer":return Math.max.apply(Math,Object(s.a)(e.elements.map(P)));case"group":return Math.max.apply(Math,Object(s.a)(e.elements.map(P)))+1;case"node":return 0}}function C(e){var t=M(e.edges,e.stack.elements.length);return function e(t,n,r){switch(t.kind){case"stack":var o={y:n.y,nodeY:n.nodeY,belowLayerY:n.belowLayerY};return t.elements.forEach((function(t,o){e(t,n,r)})),n.y=o.y,n.nodeY=o.nodeY,void(n.belowLayerY=o.belowLayerY);case"layer":return n.nodeY=n.y+P(t)*l,n.groupHeight=P(t)*(l+d)+m,n.belowLayerY=n.y+O(t)+h,t.elements.forEach((function(t){e(t,n,r)})),void(n.y+=S(t)+h);case"group":var s=r.slice(0,t.layerIndex).reduce((function(e,t){return e+t}),0);return Object.assign(t,{y:n.y+s,height:n.groupHeight}),n.y+=l,n.groupHeight-=l+d,t.elements.forEach((function(t){e(t,n,r)})),n.y-=l,void(n.groupHeight+=l+d);case"node":var a=r.slice(0,t.layerIndex).reduce((function(e,t){return e+t}),0);return void Object.assign(t,{y:n.nodeY+a,belowLayerY:n.belowLayerY+a})}}(e.stack,{y:a,nodeY:0,groupHeight:0,belowLayerY:0},t),e}function j(e){return function(e){var t=new Map;function n(e,n,r){var o=e.layerIndex<=n.layerIndex?"LOWER":"UPPER",s=e.key+o,a=t.get(s)||{node:e,side:o,edgeEnds:[]};a.edgeEnds.push({reverseNode:n,setIndex:r}),t.set(s,a)}e.forEach((function(e){n(e.from,e.to,(function(t){return Object.assign(e,{fromIndex:t})})),n(e.to,e.from,(function(t){return Object.assign(e,{toIndex:t})}))})),Array.from(t.values()).forEach((function(e){var t=e.edgeEnds,n=e.node,r=e.side,o=t.filter((function(e){return e.reverseNode.layerIndex===n.layerIndex})),s=o.filter((function(e){return e.reverseNode.x<=n.x})),a=o.filter((function(e){return e.reverseNode.x>=n.x})),i=t.filter((function(e){return e.reverseNode.layerIndex!==n.layerIndex}));s.sort(y((function(e){return e.reverseNode.x}))),i.sort(x((function(e){return e.reverseNode.x}))),a.sort(y((function(e){return e.reverseNode.x}))),s.concat(i).concat(a).forEach((function(e,t){e.setIndex(t)})),"UPPER"===r?Object.assign(n,{upperSideEdges:t.length}):Object.assign(n,{lowerSideEdges:t.length})}))}(e.edges),e}function A(e){switch(e.kind){case"stack":return e.elements.flatMap((function(e){return e.elements})).flatMap(A);case"group":return e.elements.flatMap(A);case"node":return[e]}}function D(e){switch(e.kind){case"stack":return e.elements.flatMap((function(e){return e.elements})).flatMap(D);case"group":return[e].concat(e.elements.flatMap(D));case"node":return[]}}var B=function(e){var t=.4*e.width,n=.15*e.width;return o.a.createElement("g",{key:e.symbolKey},o.a.createElement("rect",{x:e.x+t/2,y:e.y,width:.8*e.width,height:1.1*e.width,fill:"none",strokeWidth:.5,stroke:"black"}),o.a.createElement("rect",{x:e.x,y:e.y+n,width:t,height:n,fill:"lightgrey",strokeWidth:.5,stroke:"black"}),o.a.createElement("rect",{x:e.x,y:e.y+3*n,width:t,height:n,fill:"lightgrey",strokeWidth:.5,stroke:"black"}))},T=function(e){if(e.isPlaceholder)return null;var t="component"===e.symbol;return o.a.createElement("g",{key:e.key},o.a.createElement("rect",{"data-testid":"rect",x:e.x,y:e.y,width:g(e),height:m,fill:"lightgrey",strokeWidth:.5,stroke:"black"}),o.a.createElement("text",{x:e.x+5,y:e.y+m/2,fill:"black",clipPath:"url(#clip-element-text-"+e.key+")"},e.name),o.a.createElement("clipPath",{id:"clip-element-text-"+e.key},o.a.createElement("rect",{x:e.x+5,y:e.y,width:g(e)-10-(t?15:0),height:m})),t?o.a.createElement(B,{symbolKey:e.key+"CS",x:e.x+g(e)-12-3,y:e.y+3,width:12}):"")},Y=function(e){return o.a.createElement("g",{key:e.key},o.a.createElement("rect",{x:e.x,y:e.y,width:g(e),height:e.height,fill:"none",strokeWidth:.5,stroke:"grey"}),o.a.createElement("text",{x:e.x+u,y:e.y+m/2,fill:"black",clipPath:"url(#clip-element-text-"+e.key+")"},e.name),o.a.createElement("clipPath",{id:"clip-element-text-"+e.key},o.a.createElement("rect",{x:e.x+u,y:e.y,width:g(e)-2*u,height:m})))};function L(e,t,n){var r=e.layerIndex<=n.layerIndex,o=(g(e)-((r?e.lowerSideEdges:e.upperSideEdges)-1)*p)/2;return{x:e.x+o+t*p,y:e.y+(r?S(e):0)}}var X=function(e){var t=L(e.from,e.fromIndex,e.to),n=k(e).belowLayerY-h/2+e.index*p,r=L(e.to,e.toIndex,e.from);return o.a.createElement("path",{key:e.key,d:"M "+t.x+" "+t.y+" L "+t.x+" "+n+" L "+r.x+" "+n+" L "+r.x+" "+r.y,stroke:"black",strokeWidth:.5,fill:"none"})};function R(e){switch(e.kind){case"stack":return e.elements.map(R).reduce((function(e,t){return e+t}),0);case"layer":case"group":return Math.max.apply(Math,Object(s.a)(e.elements.map(R)));case"node":return 1}}function W(e){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(t.kind){case"stack":return void t.elements.forEach((function(t){e(t,n),n+=R(t)}));case"layer":return void t.elements.forEach((function(t){e(t,n)}));case"group":return Object.assign(t,{layerIndex:n}),void t.elements.forEach((function(t){e(t,n)}));case"node":return void Object.assign(t,{layerIndex:n})}}(e.stack),e}function K(e){return{stack:e.stack,edges:e.edges.flatMap((function(t){if(Math.abs(t.from.layerIndex-t.to.layerIndex)<=1)return t;for(var n=Math.min(t.from.layerIndex,t.to.layerIndex),r=Math.max(t.from.layerIndex,t.to.layerIndex),o=[],s=t.from.layerIndex<t.to.layerIndex?t.from:t.to,a=t.from.layerIndex>=t.to.layerIndex?t.from:t.to,i=n+1;i<r;i++){var c={kind:"node",name:"",size:.01,isPlaceholder:!0,layerIndex:i};e.stack.elements[i].elements.splice(0,0,c),o.push({from:s,to:c}),s=c}return o.push({from:s,to:a}),o}))}}function V(e){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{globalCounter:0};switch(t.kind){case"stack":return void t.elements.forEach((function(t){return e(t,n)}));case"layer":return void t.elements.forEach((function(t){return e(t,n)}));case"group":return Object.assign(t,{key:""+n.globalCounter}),n.globalCounter++,void t.elements.forEach((function(t){return e(t,n)}));case"node":return Object.assign(t,{key:""+n.globalCounter}),void n.globalCounter++}}(e.stack),e}n.d(t,"a",(function(){return N}));var N=function(e){return[e].map(W).map(K).map(V).map(E).map(w).map(C).map(j).map((function(e){var t=M(e.edges,e.stack.elements.length),n=g(e.stack)+2*i,r=S(e.stack)+h+t.reduce((function(e,t){return e+t}))+2*a;return o.a.createElement("svg",{viewBox:"0 0 "+n+" "+r},A(e.stack).map(T),D(e.stack).map(Y),e.edges.map(X))}))[0]}}},[[194,1,2]]]);
//# sourceMappingURL=main.cbd55098.chunk.js.map