(this["webpackJsonpsvg-experiments"]=this["webpackJsonpsvg-experiments"]||[]).push([[0],[,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_runner_work_svg_experiments_svg_experiments_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),_home_runner_work_svg_experiments_svg_experiments_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),_App_css__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(12),_App_css__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_App_css__WEBPACK_IMPORTED_MODULE_3__),MARGIN_TOP=5,MARGIN_SIDE=5,ELEMENT_WIDTH=150,ELEMENT_HEIGHT=40,HORIZONTAL_SPACING=10,VERTICAL_SPACING=20,TEXT_PADDING=5,EDGE_SPACING=10;function widthOfLayers(e){return Math.max.apply(Math,Object(_home_runner_work_svg_experiments_svg_experiments_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(e.map(widthOfElements)))}function widthOfElements(e){var r=e.length;return 0===r?0:r*ELEMENT_WIDTH+(r-1)*HORIZONTAL_SPACING}function heightOfNodes(e){var r=e.length;return r*ELEMENT_HEIGHT+r*VERTICAL_SPACING}function fromIsUpper(e){return e.from.layerIndex===e.to.layerIndex?e.from.index<=e.to.index:e.from.layerIndex<e.to.layerIndex}function getUpperNode(e){return fromIsUpper(e)?e.from:e.to}function getLowerNode(e){return fromIsUpper(e)?e.to:e.from}function heightOfEdges(e,r){var n=new Map;return e.forEach((function(e){var r=getUpperNode(e).layerIndex,t=n.get(r)||[];t.push(e),n.set(r,t)})),Array.from(Array(r).keys()).map((function(e){var r,t=(null===(r=n.get(e))||void 0===r?void 0:r.map((function(e){return e.index})))||[0];return Math.max.apply(Math,Object(_home_runner_work_svg_experiments_svg_experiments_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(t))*EDGE_SPACING}))}function addLayerPositionToNodeG(e){return{layers:addLayerPositionToNode(e.layers),edges:e.edges}}function addLayerPositionToNode(e){var r=Math.max.apply(Math,Object(_home_runner_work_svg_experiments_svg_experiments_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(e.map((function(e){return e.length}))));return e.map((function(e,n){var t=e.length,a=(r-t)/2;return e.map((function(e,r){return Object.assign(e,{key:n+"_"+r,index:r,relativePosition:a+r,layerIndex:n})}))}))}function addCoordinatesToNodeG(e){var r=heightOfEdges(e.edges,e.layers.length);return{layers:layout(e.layers,r),edges:e.edges}}function layout(e,r){var n=widthOfLayers(e);return e.map((function(e,t){var a=r.slice(0,t).reduce((function(e,r){return e+r}),0);return layoutHorizontally(e,n,a)}))}function layoutHorizontally(e,r,n){var t=(r-widthOfElements(e))/2;return e.map((function(e){return Object.assign(e,{x:e.index*(ELEMENT_WIDTH+HORIZONTAL_SPACING)+MARGIN_SIDE+t,y:e.layerIndex*(ELEMENT_HEIGHT+VERTICAL_SPACING)+MARGIN_TOP+n})}))}function addLayerPositionToEdgeG(e){return addLayerPositionToEdge(e.edges),{layers:e.layers,edges:e.edges}}function addLayerPositionToEdge(e){var r=new Map;e.forEach((function(e){var n=getUpperNode(e).layerIndex,t=r.get(n)||[];t.push(e),r.set(n,t)})),Array.from(r.values()).forEach(addLayerPositionToEdgeForLayer)}function addLayerPositionToEdgeForLayer(e){var r=new Map;e.forEach((function(e){var n=getUpperNode(e).key,t=r.get(n)||[];t.push(e),r.set(n,t)}));var n=Array.from(r.keys());n.sort();var t=0;n.forEach((function(e){var n=r.get(e),a=n.filter((function(e){return getLowerNode(e).layerIndex===getUpperNode(e).layerIndex})),o=a.filter((function(e){return getLowerNode(e).index<=getUpperNode(e).index})),_=a.filter((function(e){return getLowerNode(e).index>getUpperNode(e).index})),s=n.filter((function(e){return getLowerNode(e).layerIndex!==getUpperNode(e).layerIndex})),d=s.filter((function(e){return getLowerNode(e).relativePosition<=getUpperNode(e).relativePosition})),i=s.filter((function(e){return getLowerNode(e).relativePosition>getUpperNode(e).relativePosition}));o.sort((function(e,r){return getLowerNode(e).index-getLowerNode(r).index})),d.sort((function(e,r){return getLowerNode(e).index-getLowerNode(r).index})),i.sort((function(e,r){return getLowerNode(r).index-getLowerNode(e).index})),_.sort((function(e,r){return getLowerNode(e).index-getLowerNode(r).index}));var l=o.concat(d),E=_.concat(i);function u(e,r){var n=getUpperNode(e).layerIndex,a=t+r;Object.assign(e,{key:n+"_"+a,index:a,layerIndex:n})}l.forEach((function(e,r){return u(e,r)})),E.forEach((function(e,r){return u(e,r)})),t+=Math.max(l.length,E.length)}))}function addConnectionIndexAndNumberOfEdgesG(e){return addConnectionIndexAndNumberOfEdges(e.edges),{layers:e.layers,edges:e.edges}}function addConnectionIndexAndNumberOfEdges(e){var r=new Map;function n(e,n,t){var a=e.layerIndex<=n.layerIndex?"LOWER":"UPPER",o=e.key+a,_=r.get(o)||{node:e,side:a,edgeEnds:[]};_.edgeEnds.push({reverseNode:n,setIndex:t}),r.set(o,_)}e.forEach((function(e){n(e.from,e.to,(function(r){return Object.assign(e,{fromIndex:r})})),n(e.to,e.from,(function(r){return Object.assign(e,{toIndex:r})}))})),Array.from(r.values()).forEach((function(e){var r=e.edgeEnds,n=e.node,t=e.side,a=r.filter((function(e){return e.reverseNode.layerIndex===n.layerIndex})),o=a.filter((function(e){return e.reverseNode.index<=n.index})),_=a.filter((function(e){return e.reverseNode.index>=n.index})),s=r.filter((function(e){return e.reverseNode.layerIndex!==n.layerIndex}));o.sort((function(e,r){return r.reverseNode.index-e.reverseNode.index})),s.sort((function(e,r){return e.reverseNode.index-r.reverseNode.index})),_.sort((function(e,r){return r.reverseNode.index-e.reverseNode.index})),o.concat(s).concat(_).forEach((function(e,r){e.setIndex(r)})),"UPPER"===t?Object.assign(n,{upperSideEdges:r.length}):Object.assign(n,{lowerSideEdges:r.length})}))}var Rect=function(e){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("g",{key:e.key},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("rect",{"data-testid":"rect",x:e.x,y:e.y,width:ELEMENT_WIDTH,height:ELEMENT_HEIGHT,fill:"lightgrey",strokeWidth:1,stroke:"black"}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("text",{x:e.x+TEXT_PADDING,y:e.y+ELEMENT_HEIGHT/2,fill:"black",clipPath:"url(#clip-element-text-"+e.key+")"},e.name),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("clipPath",{id:"clip-element-text-"+e.key},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("rect",{x:e.x+TEXT_PADDING,y:e.y,width:ELEMENT_WIDTH-2*TEXT_PADDING,height:ELEMENT_HEIGHT})))},Path=function(e){var r=e.from.layerIndex<=e.to.layerIndex,n=(ELEMENT_WIDTH-((r?e.from.lowerSideEdges:e.from.upperSideEdges)-1)*EDGE_SPACING)/2,t=e.from.x+n+e.fromIndex*EDGE_SPACING,a=e.from.y+(r?ELEMENT_HEIGHT:0),o=getUpperNode(e).y+ELEMENT_HEIGHT+VERTICAL_SPACING/2+e.index*EDGE_SPACING,_=e.from.layerIndex>=e.to.layerIndex,s=(ELEMENT_WIDTH-((_?e.to.lowerSideEdges:e.to.upperSideEdges)-1)*EDGE_SPACING)/2,d=e.to.x+s+e.toIndex*EDGE_SPACING,i=e.to.y+(_?ELEMENT_HEIGHT:0);return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("path",{d:"M "+t+" "+a+" L "+t+" "+o+" L "+d+" "+o+" L "+d+" "+i,stroke:"black",strokeWidth:1,fill:"none"})},graphAsString='\nvar layers = [\n    ["element 11", "element 2", "an element with long text", "element 4"],\n    ["element 1", "element 2", "element 3"],\n    ["element 1", "element 2", "element 3", "element with changed name", "element 5"]\n]\n.map(layer => {\n    return layer.map(name => {\n        return {name: name}\n    })\n});\n\nvar edges = [\n    {from: layers[0][1], to: layers[1][0]},\n    {from: layers[0][2], to: layers[1][2]},\n    {from: layers[0][3], to: layers[1][1]},\n    {from: layers[1][2], to: layers[2][2]},\n    {from: layers[1][1], to: layers[2][4]},\n    {from: layers[1][1], to: layers[2][3]},\n    {from: layers[1][1], to: layers[2][2]},\n    {from: layers[1][1], to: layers[2][1]},\n    {from: layers[1][1], to: layers[2][0]},\n    {from: layers[2][0], to: layers[1][0]},\n    {from: layers[2][1], to: layers[1][0]},\n    {from: layers[2][0], to: layers[2][3]},\n    {from: layers[2][1], to: layers[2][3]},\n    {from: layers[2][4], to: layers[2][3]},\n    {from: layers[0][0], to: layers[0][2]},\n    {from: layers[0][0], to: layers[0][1]},\n    {from: layers[0][0], to: layers[1][0]},\n    {from: layers[0][0], to: layers[1][0]},\n    {from: layers[1][1], to: layers[1][0]},\n    {from: layers[1][1], to: layers[1][2]}\n];\n\nvar graph = {\n    layers: layers,\n    edges: edges\n};\n\ngraph\n',initialGraph=eval(graphAsString),Diagram=function(e){return[e].map(addLayerPositionToNodeG).map(addLayerPositionToEdgeG).map(addCoordinatesToNodeG).map(addConnectionIndexAndNumberOfEdgesG).map((function(e){var r=heightOfEdges(e.edges,e.layers.length),n=widthOfLayers(e.layers)+2*MARGIN_SIDE,t=heightOfNodes(e.layers)+r.reduce((function(e,r){return e+r}))+2*MARGIN_TOP;return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("svg",{viewBox:"0 0 "+n+" "+t},e.layers.flat().map(Rect),e.edges.map(Path))}))[0]},App=function App(){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(initialGraph),_useState2=Object(_home_runner_work_svg_experiments_svg_experiments_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState,2),graph=_useState2[0],setGraph=_useState2[1];function handleChange(changeEvent){setGraph(eval(changeEvent.target.value))}return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"App"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Diagram,{layers:graph.layers,edges:graph.edges}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("textarea",{cols:120,rows:20,onChange:handleChange},graphAsString))};__webpack_exports__.a=App},,function(e,r,n){e.exports=n(13)},,,,,function(e,r,n){},function(e,r,n){},function(e,r,n){"use strict";n.r(r);var t=n(0),a=n.n(t),o=n(3),_=n.n(o),s=(n(11),n(4));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));_.a.render(a.a.createElement(s.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[6,1,2]]]);
//# sourceMappingURL=main.3bc2d2bf.chunk.js.map